<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Module: Etc
  
    &mdash; Documentation by YARD 0.9.12
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "Etc";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index (E)</a> &raquo;
    
    
    <span class="title">Etc</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Module: Etc
  
  
  
</h1>
<div class="box_info">
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>ext/etc/etc.c</dd>
  </dl>
  
</div>


  <h2>Constant Summary</h2>
  <dl class="constants">
    
      <dt id="Passwd-constant" class="">Passwd =
        <div class="docstring">
  <div class="discussion">
    
<p>Passwd</p>

<p>Passwd is a Struct that contains the following members:</p>
<dl class="rdoc-list note-list"><dt>name
<dd>
<p>contains the short login name of the user as a String.</p>
</dd><dt>passwd
<dd>
<p>contains the encrypted password of the user as a String. an &#39;x&#39; is
returned if shadow passwords are in use. An &#39;*&#39; is returned</p>

<pre class="code c"><code class="c">if the user cannot log in using a password.</code></pre>
</dd><dt>uid
<dd>
<p>contains the integer user ID (uid) of the user.</p>
</dd><dt>gid
<dd>
<p>contains the integer group ID (gid) of the user&#39;s primary group.</p>
</dd><dt>dir
<dd>
<p>contains the path to the home directory of the user as a String.</p>
</dd><dt>shell
<dd>
<p>contains the path to the login shell of the user as a String.</p>
</dd></dl>

<h3 id="label-The+following+members+below+are+optional-2C+and+must+be+compiled+with+special+flags-3A">The following members below are optional, and must be compiled with special flags:</h3>
<dl class="rdoc-list note-list"><dt>gecos
<dd>
<p>contains a longer String description of the user, such as</p>
</dd></dl>

<pre class="code c"><code class="c">a full name. Some Unix systems provide structured information in the
 gecos field, but this is system-dependent.
 must be compiled with +HAVE_STRUCT_PASSWD_PW_GECOS+</code></pre>
<dl class="rdoc-list note-list"><dt>change
<dd>
<p>password change time(integer) must be compiled with
<code>HAVE_STRUCT_PASSWD_PW_CHANGE</code></p>
</dd><dt>quota
<dd>
<p>quota value(integer) must be compiled with
<code>HAVE_STRUCT_PASSWD_PW_QUOTA</code></p>
</dd><dt>age
<dd>
<p>password age(integer) must be compiled with
<code>HAVE_STRUCT_PASSWD_PW_AGE</code></p>
</dd><dt>class
<dd>
<p>user access class(string) must be compiled with
<code>HAVE_STRUCT_PASSWD_PW_CLASS</code></p>
</dd><dt>comment
<dd>
<p>comment(string) must be compiled with
<code>HAVE_STRUCT_PASSWD_PW_COMMENT</code></p>
</dd><dt>expire
<dd>
<p>account expiration time(integer) must be compiled with
<code>HAVE_STRUCT_PASSWD_PW_EXPIRE</code></p>
</dd></dl>


  </div>
</div>
<div class="tags">
  

</div>
      </dt>
      <dd><pre class="code"><span class='const'>Define</span><span class='op'>-</span><span class='id identifier rubyid_const'>const</span></pre></dd>
    
      <dt id="Group-constant" class="">Group =
        <div class="docstring">
  <div class="discussion">
    
<p>Group</p>

<p>Group is a Struct that is only available when compiled with
<code>HAVE_GETGRENT</code>.</p>

<p>The struct contains the following members:</p>
<dl class="rdoc-list note-list"><dt>name
<dd>
<p>contains the name of the group as a String.</p>
</dd><dt>passwd
<dd>
<p>contains the encrypted password as a String. An &#39;x&#39; is returned if
password access to the group is not available; an empty string is returned
if no password is needed to obtain membership of the group.</p>

<p>Must be compiled with <code>HAVE_STRUCT_GROUP_GR_PASSWD</code>.</p>
</dd><dt>gid
<dd>
<p>contains the group&#39;s numeric ID as an integer.</p>
</dd><dt>mem
<dd>
<p>is an Array of Strings containing the short login names of the members of
the group.</p>
</dd></dl>


  </div>
</div>
<div class="tags">
  

</div>
      </dt>
      <dd><pre class="code"><span class='const'>Define</span><span class='op'>-</span><span class='id identifier rubyid_const'>const</span></pre></dd>
    
  </dl>







  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#confstr-class_method" title="confstr (class method)">.<strong>confstr</strong>(arg)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns system configuration variable using confstr().</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#endgrent-class_method" title="endgrent (class method)">.<strong>endgrent</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Ends the process of scanning through the /etc/group file begun by
::getgrent, and closes the file.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#endpwent-class_method" title="endpwent (class method)">.<strong>endpwent</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Ends the process of scanning through the /etc/passwd file begun with
::getpwent, and closes the file.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#getgrent-class_method" title="getgrent (class method)">.<strong>getgrent</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns an entry from the /etc/group file.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#getgrgid-class_method" title="getgrgid (class method)">.<strong>getgrgid</strong>(*args)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>getgrgid(group_id)  -&gt;	Group.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#getgrnam-class_method" title="getgrnam (class method)">.<strong>getgrnam</strong>(nam)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>getgrnam(name)	-&gt;  Group.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#getlogin-class_method" title="getlogin (class method)">.<strong>getlogin</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>getlogin	-&gt;  String.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#getpwent-class_method" title="getpwent (class method)">.<strong>getpwent</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns an entry from the /etc/passwd file.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#getpwnam-class_method" title="getpwnam (class method)">.<strong>getpwnam</strong>(nam)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>getpwnam(name)	-&gt;  Passwd.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#getpwuid-class_method" title="getpwuid (class method)">.<strong>getpwuid</strong>(*args)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>getpwuid(uid)	-&gt;  Passwd.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#group-class_method" title="group (class method)">.<strong>group</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Provides a convenient Ruby iterator which executes a block for each entry
in the /etc/group file.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#nprocessors-class_method" title="nprocessors (class method)">.<strong>nprocessors</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the number of online processors.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#passwd-class_method" title="passwd (class method)">.<strong>passwd</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Etc.passwd { |struct| block }	-&gt;  Passwd Etc.passwd			-&gt;  Passwd.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#setgrent-class_method" title="setgrent (class method)">.<strong>setgrent</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Resets the process of reading the /etc/group file, so that the next call to
::getgrent will return the first entry again.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#setpwent-class_method" title="setpwent (class method)">.<strong>setpwent</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Resets the process of reading the /etc/passwd file, so that the next call
to ::getpwent will return the first entry again.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#sysconf-class_method" title="sysconf (class method)">.<strong>sysconf</strong>(arg)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns system configuration variable using sysconf().</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#sysconfdir-class_method" title="sysconfdir (class method)">.<strong>sysconfdir</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns system configuration directory.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#systmpdir-class_method" title="systmpdir (class method)">.<strong>systmpdir</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns system temporary directory; typically “/tmp”.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#uname-class_method" title="uname (class method)">.<strong>uname</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the system information obtained by uname system call.</p>
</div></span>
  
</li>

      
    </ul>
  



  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="confstr-class_method">
  
    .<strong>confstr</strong>(arg)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns system configuration variable using confstr().</p>

<p><em>name</em> should be a constant under <code>Etc</code> which begins with
<code>CS_</code>.</p>

<p>The return value is a string or nil. nil means no configuration-defined
value.  (confstr() returns 0 but errno is not set.)</p>

<pre class="code"><code class=""><span class='const'><span class='object_link'><a href="" title="Etc (module)">Etc</a></span></span><span class='period'>.</span><span class='id identifier rubyid_confstr'>confstr</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="" title="Etc (module)">Etc</a></span></span><span class='op'>::</span><span class='const'>CS_PATH</span><span class='rparen'>)</span> <span class='comment'>#=&gt; &quot;/bin:/usr/bin&quot;
</span>
<span class='comment'># GNU/Linux
</span><span class='const'><span class='object_link'><a href="" title="Etc (module)">Etc</a></span></span><span class='period'>.</span><span class='id identifier rubyid_confstr'>confstr</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="" title="Etc (module)">Etc</a></span></span><span class='op'>::</span><span class='const'>CS_GNU_LIBC_VERSION</span><span class='rparen'>)</span> <span class='comment'>#=&gt; &quot;glibc 2.18&quot;
</span><span class='const'><span class='object_link'><a href="" title="Etc (module)">Etc</a></span></span><span class='period'>.</span><span class='id identifier rubyid_confstr'>confstr</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="" title="Etc (module)">Etc</a></span></span><span class='op'>::</span><span class='const'>CS_GNU_LIBPTHREAD_VERSION</span><span class='rparen'>)</span> <span class='comment'>#=&gt; &quot;NPTL 2.18&quot;
</span></code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


856
857
858
859
860
861
862
863
864
865
866
867
868
869
870
871
872
873
874
875
876
877
878
879
880
881
882</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/etc/etc.c', line 856</span>

static VALUE
etc_confstr(VALUE obj, VALUE arg)
{
    int name;
    char localbuf[128], *buf = localbuf;
    size_t bufsize = sizeof(localbuf), ret;
    VALUE tmp;

    name = NUM2INT(arg);

    errno = 0;
    ret = confstr(name, buf, bufsize);
    if (bufsize &lt; ret) {
        bufsize = ret;
        buf = ALLOCV_N(char, tmp, bufsize);
        errno = 0;
        ret = confstr(name, buf, bufsize);
    }
    if (bufsize &lt; ret)
        rb_bug(&quot;required buffer size for confstr() changed dynamically.&quot;);
    if (ret == 0) {
        if (errno == 0) /* no configuration-defined value */
            return Qnil;
        rb_sys_fail(&quot;confstr&quot;);
    }
    return rb_str_new_cstr(buf);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="endgrent-class_method">
  
    .<strong>endgrent</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Ends the process of scanning through the /etc/group file begun by
::getgrent, and closes the file.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


586
587
588
589
590
591
592
593</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/etc/etc.c', line 586</span>

static VALUE
etc_endgrent(VALUE obj)
{
#ifdef HAVE_GETGRENT
    endgrent();
#endif
    return Qnil;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="endpwent-class_method">
  
    .<strong>endpwent</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Ends the process of scanning through the /etc/passwd file begun with
::getpwent, and closes the file.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


347
348
349
350
351
352
353
354</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/etc/etc.c', line 347</span>

static VALUE
etc_endpwent(VALUE obj)
{
#ifdef HAVE_GETPWENT
    endpwent();
#endif
    return Qnil;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="getgrent-class_method">
  
    .<strong>getgrent</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns an entry from the /etc/group file.</p>

<p>The first time it is called it opens the file and returns the first entry;
each successive call returns the next entry, or <code>nil</code> if the end
of the file has been reached.</p>

<p>To close the file when processing is complete, call ::endgrent.</p>

<p>Each entry is returned as a Group struct</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


605
606
607
608
609
610
611
612
613
614
615
616</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/etc/etc.c', line 605</span>

static VALUE
etc_getgrent(VALUE obj)
{
#ifdef HAVE_GETGRENT
    struct group *gr;

    if ((gr = getgrent()) != 0) {
	return setup_group(gr);
    }
#endif
    return Qnil;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="getgrgid-class_method">
  
    .<strong>getgrgid</strong>(*args)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>getgrgid(group_id)  -&gt;	Group</p>

<p>Returns information about the group with specified integer
<code>group_id</code>, as found in /etc/group.</p>

<p>The information is returned as a Group struct.</p>

<p>See the unix manpage for <code>getgrgid(3)</code> for more detail.</p>

<h3 id="label-Example-3A">Example:</h3>

<p>Etc.getgrgid(100) #=&gt; #&lt;struct Etc::Group name=“users”, passwd=“x”,
gid=100, mem=[“meta”, “root”]&gt;</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


419
420
421
422
423
424
425
426
427
428
429
430
431
432
433
434
435
436
437
438
439</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/etc/etc.c', line 419</span>

static VALUE
etc_getgrgid(int argc, VALUE *argv, VALUE obj)
{
#ifdef HAVE_GETGRENT
    VALUE id;
    gid_t gid;
    struct group *grp;

    if (rb_scan_args(argc, argv, &quot;01&quot;, &amp;id) == 1) {
	gid = NUM2GIDT(id);
    }
    else {
	gid = getgid();
    }
    grp = getgrgid(gid);
    if (grp == 0) rb_raise(rb_eArgError, &quot;can&#39;t find group for %d&quot;, (int)gid);
    return setup_group(grp);
#else
    return Qnil;
#endif
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="getgrnam-class_method">
  
    .<strong>getgrnam</strong>(nam)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>getgrnam(name)	-&gt;  Group</p>

<p>Returns information about the group with specified <code>name</code>, as
found in /etc/group.</p>

<p>The information is returned as a Group struct.</p>

<p>See the unix manpage for <code>getgrnam(3)</code> for more detail.</p>

<h3 id="label-Example-3A">Example:</h3>

<p>Etc.getgrnam(&#39;users&#39;) #=&gt; #&lt;struct Etc::Group name=“users”,
passwd=“x”, gid=100, mem=[“meta”, “root”]&gt;</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


457
458
459
460
461
462
463
464
465
466
467
468
469
470
471</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/etc/etc.c', line 457</span>

static VALUE
etc_getgrnam(VALUE obj, VALUE nam)
{
#ifdef HAVE_GETGRENT
    struct group *grp;
    const char *p = StringValueCStr(nam);

    rb_check_safe_obj(nam);
    grp = getgrnam(p);
    if (grp == 0) rb_raise(rb_eArgError, &quot;can&#39;t find group for %&quot;PRIsVALUE, nam);
    return setup_group(grp);
#else
    return Qnil;
#endif
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="getlogin-class_method">
  
    .<strong>getlogin</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>getlogin	-&gt;  String</p>

<p>Returns the short user name of the currently logged in user. Unfortunately,
it is often rather easy to fool ::getlogin.</p>

<p>Avoid ::getlogin for security-related purposes.</p>

<p>If ::getlogin fails, try ::getpwuid.</p>

<p>See the unix manpage for <code>getpwuid(3)</code> for more detail.</p>

<p>e.g.</p>

<pre class="code"><code class="">Etc.getlogin -&gt; &#39;guest&#39;</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/etc/etc.c', line 72</span>

static VALUE
etc_getlogin(VALUE obj)
{
    char *login;

#ifdef HAVE_GETLOGIN
    login = getlogin();
    if (!login) login = getenv(&quot;USER&quot;);
#else
    login = getenv(&quot;USER&quot;);
#endif

    if (login) {
#ifdef _WIN32
	rb_encoding *extenc = rb_utf8_encoding();
#else
	rb_encoding *extenc = rb_locale_encoding();
#endif
	return rb_external_str_new_with_enc(login, strlen(login), extenc);
    }

    return Qnil;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="getpwent-class_method">
  
    .<strong>getpwent</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns an entry from the /etc/passwd file.</p>

<p>The first time it is called it opens the file and returns the first entry;
each successive call returns the next entry, or <code>nil</code> if the end
of the file has been reached.</p>

<p>To close the file when processing is complete, call ::endpwent.</p>

<p>Each entry is returned as a Passwd struct.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


367
368
369
370
371
372
373
374
375
376
377
378</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/etc/etc.c', line 367</span>

static VALUE
etc_getpwent(VALUE obj)
{
#ifdef HAVE_GETPWENT
    struct passwd *pw;

    if ((pw = getpwent()) != 0) {
	return setup_passwd(pw);
    }
#endif
    return Qnil;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="getpwnam-class_method">
  
    .<strong>getpwnam</strong>(nam)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>getpwnam(name)	-&gt;  Passwd</p>

<p>Returns the /etc/passwd information for the user with specified login
<code>name</code>.</p>

<p>The information is returned as a Passwd struct.</p>

<p>See the unix manpage for <code>getpwnam(3)</code> for more detail.</p>

<h3 id="label-Example-3A">Example:</h3>

<p>Etc.getpwnam(&#39;root&#39;) #=&gt; #&lt;struct Etc::Passwd name=“root”,
passwd=“x”, uid=0, gid=0, gecos=“root”,dir=“/root”, shell=“/bin/bash”&gt;</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


213
214
215
216
217
218
219
220
221
222
223
224
225
226
227</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/etc/etc.c', line 213</span>

static VALUE
etc_getpwnam(VALUE obj, VALUE nam)
{
#ifdef HAVE_GETPWENT
    struct passwd *pwd;
    const char *p = StringValueCStr(nam);

    rb_check_safe_obj(nam);
    pwd = getpwnam(p);
    if (pwd == 0) rb_raise(rb_eArgError, &quot;can&#39;t find user for %&quot;PRIsVALUE, nam);
    return setup_passwd(pwd);
#else
    return Qnil;
#endif
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="getpwuid-class_method">
  
    .<strong>getpwuid</strong>(*args)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>getpwuid(uid)	-&gt;  Passwd</p>

<p>Returns the /etc/passwd information for the user with the given integer
<code>uid</code>.</p>

<p>The information is returned as a Passwd struct.</p>

<p>If <code>uid</code> is omitted, the value from <code>Passwd[:uid]</code> is
returned instead.</p>

<p>See the unix manpage for <code>getpwuid(3)</code> for more detail.</p>

<h3 id="label-Example-3A">Example:</h3>

<p>Etc.getpwuid(0) #=&gt; #&lt;struct Etc::Passwd name=“root”, passwd=“x”,
uid=0, gid=0, gecos=“root”,dir=“/root”, shell=“/bin/bash”&gt;</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/etc/etc.c', line 176</span>

static VALUE
etc_getpwuid(int argc, VALUE *argv, VALUE obj)
{
#if defined(HAVE_GETPWENT)
    VALUE id;
    rb_uid_t uid;
    struct passwd *pwd;

    if (rb_scan_args(argc, argv, &quot;01&quot;, &amp;id) == 1) {
	uid = NUM2UIDT(id);
    }
    else {
	uid = getuid();
    }
    pwd = getpwuid(uid);
    if (pwd == 0) rb_raise(rb_eArgError, &quot;can&#39;t find user for %d&quot;, (int)uid);
    return setup_passwd(pwd);
#else
    return Qnil;
#endif
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="group-class_method">
  
    .<strong>group</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Provides a convenient Ruby iterator which executes a block for each entry
in the /etc/group file.</p>

<p>The code block is passed an Group struct.</p>

<p>See ::getgrent above for details.</p>

<p>Example:</p>

<pre class="code"><code class=""><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>etc</span><span class='tstring_end'>&#39;</span></span>

<span class='const'><span class='object_link'><a href="" title="Etc (module)">Etc</a></span></span><span class='period'>.</span><span class='id identifier rubyid_group'>group</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_g'>g</span><span class='op'>|</span>
  <span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_g'>g</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>: </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_g'>g</span><span class='period'>.</span><span class='id identifier rubyid_mem'>mem</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>, </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='rbrace'>}</span>
</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


523
524
525
526
527
528
529
530
531
532
533
534
535
536
537</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/etc/etc.c', line 523</span>

static VALUE
etc_group(VALUE obj)
{
#ifdef HAVE_GETGRENT
    struct group *grp;

    if (rb_block_given_p()) {
	each_group();
    }
    else if ((grp = getgrent()) != 0) {
	return setup_group(grp);
    }
#endif
    return Qnil;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="nprocessors-class_method">
  
    .<strong>nprocessors</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the number of online processors.</p>

<p>The result is intended as the number of processes to use all available
processors.</p>

<p>This method is implemented using:</p>
<ul><li>
<p>sched_getaffinity(): Linux</p>
</li><li>
<p>sysconf(_SC_NPROCESSORS_ONLN): GNU/Linux, NetBSD, FreeBSD, OpenBSD,
DragonFly BSD, OpenIndiana, Mac OS X, AIX</p>
</li></ul>

<p>Example:</p>

<pre class="code"><code class=""><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>etc</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_p'>p</span> <span class='const'><span class='object_link'><a href="" title="Etc (module)">Etc</a></span></span><span class='period'>.</span><span class='id identifier rubyid_nprocessors'>nprocessors</span> <span class='comment'>#=&gt; 4
</span></code></pre>

<p>The result might be smaller number than physical cpus especially when ruby
process is bound to specific cpus. This is intended for getting better
parallel processing.</p>

<p>Example: (Linux)</p>

<pre class="code"><code class="">linux$ taskset 0x3 ./ruby -retc -e &quot;p Etc.nprocessors&quot;  #=&gt; 2</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1006
1007
1008
1009
1010
1011
1012
1013
1014
1015
1016
1017
1018
1019
1020
1021
1022
1023
1024
1025
1026
1027
1028
1029
1030
1031
1032
1033
1034</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/etc/etc.c', line 1006</span>

static VALUE
etc_nprocessors(VALUE obj)
{
    long ret;

#if !defined(_WIN32)

#if defined(HAVE_SCHED_GETAFFINITY) &amp;&amp; defined(CPU_ALLOC)
    int ncpus;

    ncpus = etc_nprocessors_affin();
    if (ncpus != -1) {
	return INT2NUM(ncpus);
    }
    /* fallback to _SC_NPROCESSORS_ONLN */
#endif

    errno = 0;
    ret = sysconf(_SC_NPROCESSORS_ONLN);
    if (ret == -1) {
        rb_sys_fail(&quot;sysconf(_SC_NPROCESSORS_ONLN)&quot;);
    }
#else
    SYSTEM_INFO si;
    GetSystemInfo(&amp;si);
    ret = (long)si.dwNumberOfProcessors;
#endif
    return LONG2NUM(ret);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="passwd-class_method">
  
    .<strong>passwd</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Etc.passwd { |struct| block }	-&gt;  Passwd Etc.passwd			-&gt;  Passwd</p>

<p>Provides a convenient Ruby iterator which executes a block for each entry
in the /etc/passwd file.</p>

<p>The code block is passed an Passwd struct.</p>

<p>See ::getpwent above for details.</p>

<p>Example:</p>

<pre class="code"><code class=""><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>etc</span><span class='tstring_end'>&#39;</span></span>

<span class='const'><span class='object_link'><a href="" title="Etc (module)">Etc</a></span></span><span class='period'>.</span><span class='id identifier rubyid_passwd'>passwd</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_u'>u</span><span class='op'>|</span>
  <span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_u'>u</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> = </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_u'>u</span><span class='period'>.</span><span class='id identifier rubyid_gecos'>gecos</span>
<span class='rbrace'>}</span>
</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


282
283
284
285
286
287
288
289
290
291
292
293
294
295
296</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/etc/etc.c', line 282</span>

static VALUE
etc_passwd(VALUE obj)
{
#ifdef HAVE_GETPWENT
    struct passwd *pw;

    if (rb_block_given_p()) {
	each_passwd();
    }
    else if ((pw = getpwent()) != 0) {
	return setup_passwd(pw);
    }
#endif
    return Qnil;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="setgrent-class_method">
  
    .<strong>setgrent</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Resets the process of reading the /etc/group file, so that the next call to
::getgrent will return the first entry again.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


574
575
576
577
578
579
580
581</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/etc/etc.c', line 574</span>

static VALUE
etc_setgrent(VALUE obj)
{
#ifdef HAVE_GETGRENT
    setgrent();
#endif
    return Qnil;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="setpwent-class_method">
  
    .<strong>setpwent</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Resets the process of reading the /etc/passwd file, so that the next call
to ::getpwent will return the first entry again.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


335
336
337
338
339
340
341
342</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/etc/etc.c', line 335</span>

static VALUE
etc_setpwent(VALUE obj)
{
#ifdef HAVE_GETPWENT
    setpwent();
#endif
    return Qnil;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="sysconf-class_method">
  
    .<strong>sysconf</strong>(arg)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns system configuration variable using sysconf().</p>

<p><em>name</em> should be a constant under <code>Etc</code> which begins with
<code>SC_</code>.</p>

<p>The return value is an integer or nil. nil means indefinite limit. 
(sysconf() returns -1 but errno is not set.)</p>

<pre class="code"><code class=""><span class='const'><span class='object_link'><a href="" title="Etc (module)">Etc</a></span></span><span class='period'>.</span><span class='id identifier rubyid_sysconf'>sysconf</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="" title="Etc (module)">Etc</a></span></span><span class='op'>::</span><span class='const'>SC_ARG_MAX</span><span class='rparen'>)</span> <span class='comment'>#=&gt; 2097152
</span><span class='const'><span class='object_link'><a href="" title="Etc (module)">Etc</a></span></span><span class='period'>.</span><span class='id identifier rubyid_sysconf'>sysconf</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="" title="Etc (module)">Etc</a></span></span><span class='op'>::</span><span class='const'>SC_LOGIN_NAME_MAX</span><span class='rparen'>)</span> <span class='comment'>#=&gt; 256
</span></code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


819
820
821
822
823
824
825
826
827
828
829
830
831
832
833
834
835</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/etc/etc.c', line 819</span>

static VALUE
etc_sysconf(VALUE obj, VALUE arg)
{
    int name;
    long ret;

    name = NUM2INT(arg);

    errno = 0;
    ret = sysconf(name);
    if (ret == -1) {
        if (errno == 0) /* no limit */
            return Qnil;
        rb_sys_fail(&quot;sysconf&quot;);
    }
    return LONG2NUM(ret);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="sysconfdir-class_method">
  
    .<strong>sysconfdir</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns system configuration directory.</p>

<p>This is typically “/etc”, but is modified by the prefix used when Ruby was
compiled. For example, if Ruby is built and installed in /usr/local,
returns “/usr/local/etc” on other platforms than Windows. On Windows, this
always returns the directory provided by the system.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


634
635
636
637
638
639
640
641
642</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/etc/etc.c', line 634</span>

static VALUE
etc_sysconfdir(VALUE obj)
{
#ifdef _WIN32
    return rb_w32_special_folder(CSIDL_COMMON_APPDATA);
#else
    return rb_filesystem_str_new_cstr(SYSCONFDIR);
#endif
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="systmpdir-class_method">
  
    .<strong>systmpdir</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns system temporary directory; typically “/tmp”.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


647
648
649
650
651
652
653
654
655
656
657
658
659
660
661
662
663
664
665
666
667
668
669
670
671
672
673
674
675
676
677
678
679
680
681
682</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/etc/etc.c', line 647</span>

static VALUE
etc_systmpdir(void)
{
    VALUE tmpdir;
#ifdef _WIN32
    WCHAR path[_MAX_PATH];
    UINT len = rb_w32_system_tmpdir(path, numberof(path));
    if (!len) return Qnil;
    tmpdir = rb_w32_conv_from_wchar(path, rb_filesystem_encoding());
#else
    const char default_tmp[] = &quot;/tmp&quot;;
    const char *tmpstr = default_tmp;
    size_t tmplen = strlen(default_tmp);
# if defined _CS_DARWIN_USER_TEMP_DIR
    #ifndef MAXPATHLEN
    #define MAXPATHLEN 1024
    #endif
    char path[MAXPATHLEN];
    size_t len;
    len = confstr(_CS_DARWIN_USER_TEMP_DIR, path, sizeof(path));
    if (len &gt; 0) {
	tmpstr = path;
	tmplen = len - 1;
	if (len &gt; sizeof(path)) tmpstr = 0;
    }
# endif
    tmpdir = rb_filesystem_str_new(tmpstr, tmplen);
# if defined _CS_DARWIN_USER_TEMP_DIR
    if (!tmpstr) {
	confstr(_CS_DARWIN_USER_TEMP_DIR, RSTRING_PTR(tmpdir), len);
    }
# endif
#endif
    FL_UNSET(tmpdir, FL_TAINT);
    return tmpdir;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="uname-class_method">
  
    .<strong>uname</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the system information obtained by uname system call.</p>

<p>The return value is a hash which has 5 keys at least:</p>

<pre class="code"><code class="">:sysname, :nodename, :release, :version, :machine</code></pre>

<p>Example:</p>

<pre class="code"><code class=""><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>etc</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>pp</span><span class='tstring_end'>&#39;</span></span>

<span class='id identifier rubyid_pp'>pp</span> <span class='const'><span class='object_link'><a href="" title="Etc (module)">Etc</a></span></span><span class='period'>.</span><span class='id identifier rubyid_uname'>uname</span>
<span class='comment'>#=&gt; {:sysname=&gt;&quot;Linux&quot;,
</span><span class='comment'>#    :nodename=&gt;&quot;boron&quot;,
</span><span class='comment'>#    :release=&gt;&quot;2.6.18-6-xen-686&quot;,
</span><span class='comment'>#    :version=&gt;&quot;#1 SMP Thu Nov 5 19:54:42 UTC 2009&quot;,
</span><span class='comment'>#    :machine=&gt;&quot;i686&quot;}
</span></code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


704
705
706
707
708
709
710
711
712
713
714
715
716
717
718
719
720
721
722
723
724
725
726
727
728
729
730
731
732
733
734
735
736
737
738
739
740
741
742
743
744
745
746
747
748
749
750
751
752
753
754
755
756
757
758
759
760
761
762
763
764
765
766
767
768
769
770
771
772
773
774
775
776
777
778
779
780
781
782
783
784
785
786
787
788
789
790
791
792
793
794
795
796
797
798
799
800
801</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/etc/etc.c', line 704</span>

static VALUE
etc_uname(VALUE obj)
{
#ifdef _WIN32
    OSVERSIONINFOW v;
    SYSTEM_INFO s;
    const char *sysname, *mach;
    VALUE result, release, version;
    VALUE vbuf, nodename = Qnil;
    DWORD len = 0;
    WCHAR *buf;

    v.dwOSVersionInfoSize = sizeof(v);
    if (!GetVersionExW(&amp;v))
        rb_sys_fail(&quot;GetVersionEx&quot;);

    result = rb_hash_new();
    switch (v.dwPlatformId) {
      case VER_PLATFORM_WIN32s:
	sysname = &quot;Win32s&quot;;
	break;
      case VER_PLATFORM_WIN32_NT:
	sysname = &quot;Windows_NT&quot;;
	break;
      case VER_PLATFORM_WIN32_WINDOWS:
      default:
	sysname = &quot;Windows&quot;;
	break;
    }
    rb_hash_aset(result, ID2SYM(rb_intern(&quot;sysname&quot;)), rb_str_new_cstr(sysname));
    release = rb_sprintf(&quot;%lu.%lu.%lu&quot;, v.dwMajorVersion, v.dwMinorVersion, v.dwBuildNumber);
    rb_hash_aset(result, ID2SYM(rb_intern(&quot;release&quot;)), release);
    version = rb_sprintf(&quot;%s Version %&quot;PRIsVALUE&quot;: %&quot;PRIsVALUE, sysname, release,
			 rb_w32_conv_from_wchar(v.szCSDVersion, rb_utf8_encoding()));
    rb_hash_aset(result, ID2SYM(rb_intern(&quot;version&quot;)), version);

# if defined _MSC_VER &amp;&amp; _MSC_VER &lt; 1300
#   define GET_COMPUTER_NAME(ptr, plen) GetComputerNameW(ptr, plen)
# else
#   define GET_COMPUTER_NAME(ptr, plen) GetComputerNameExW(ComputerNameDnsFullyQualified, ptr, plen)
# endif
    GET_COMPUTER_NAME(NULL, &amp;len);
    buf = ALLOCV_N(WCHAR, vbuf, len);
    if (GET_COMPUTER_NAME(buf, &amp;len)) {
	nodename = rb_w32_conv_from_wchar(buf, rb_utf8_encoding());
    }
    ALLOCV_END(vbuf);
    if (NIL_P(nodename)) nodename = rb_str_new(0, 0);
    rb_hash_aset(result, ID2SYM(rb_intern(&quot;nodename&quot;)), nodename);

# ifndef PROCESSOR_ARCHITECTURE_AMD64
#   define PROCESSOR_ARCHITECTURE_AMD64 9
# endif
# ifndef PROCESSOR_ARCHITECTURE_IA64
#   define PROCESSOR_ARCHITECTURE_IA64 6
# endif
# ifndef PROCESSOR_ARCHITECTURE_INTEL
#   define PROCESSOR_ARCHITECTURE_INTEL 0
# endif
    GetSystemInfo(&amp;s);
    switch (s.wProcessorArchitecture) {
      case PROCESSOR_ARCHITECTURE_AMD64:
	mach = &quot;x64&quot;;
	break;
      case PROCESSOR_ARCHITECTURE_ARM:
	mach = &quot;ARM&quot;;
	break;
      case PROCESSOR_ARCHITECTURE_IA64:
	mach = &quot;IA64&quot;;
	break;
      case PROCESSOR_ARCHITECTURE_INTEL:
	mach = &quot;x86&quot;;
	break;
      default:
	mach = &quot;unknown&quot;;
	break;
    }

    rb_hash_aset(result, ID2SYM(rb_intern(&quot;machine&quot;)), rb_str_new_cstr(mach));
#else
    struct utsname u;
    int ret;
    VALUE result;

    ret = uname(&amp;u);
    if (ret == -1)
        rb_sys_fail(&quot;uname&quot;);

    result = rb_hash_new();
    rb_hash_aset(result, ID2SYM(rb_intern(&quot;sysname&quot;)), rb_str_new_cstr(u.sysname));
    rb_hash_aset(result, ID2SYM(rb_intern(&quot;nodename&quot;)), rb_str_new_cstr(u.nodename));
    rb_hash_aset(result, ID2SYM(rb_intern(&quot;release&quot;)), rb_str_new_cstr(u.release));
    rb_hash_aset(result, ID2SYM(rb_intern(&quot;version&quot;)), rb_str_new_cstr(u.version));
    rb_hash_aset(result, ID2SYM(rb_intern(&quot;machine&quot;)), rb_str_new_cstr(u.machine));
#endif

    return result;
}</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Mon Feb 26 22:17:41 2018 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.12 (ruby-2.4.2).
</div>

    </div>
  </body>
</html>