<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Module: ObjectSpace
  
    &mdash; Documentation by YARD 0.9.12
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "ObjectSpace";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index (O)</a> &raquo;
    
    
    <span class="title">ObjectSpace</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Module: ObjectSpace
  
  
  
</h1>
<div class="box_info">
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>gc.c<span class="defines">,<br />
  gc.c</span>
</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>The ObjectSpace module contains a number of routines</p>

<pre class="code ruby"><code class="ruby">that interact with the garbage collection facility and allow you to
traverse all living objects with an iterator.

ObjectSpace also provides support for object finalizers, procs that will be
called when a specific object is about to be destroyed by garbage
collection.

   require &#39;objspace&#39;

   a = &quot;A&quot;
   b = &quot;B&quot;

   ObjectSpace.define_finalizer(a, proc {|id| puts &quot;Finalizer one on #{id}&quot; })
   ObjectSpace.define_finalizer(b, proc {|id| puts &quot;Finalizer two on #{id}&quot; })

_produces:_

   Finalizer two on 537763470
   Finalizer one on 537763480</code></pre>


  </div>
</div>
<div class="tags">
  

</div><h2>Defined Under Namespace</h2>
<p class="children">
  
    
  
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="ObjectSpace/WeakMap.html" title="ObjectSpace::WeakMap (class)">WeakMap</a></span>
    
  
</p>







  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#_id2ref-class_method" title="_id2ref (class method)">.<strong>_id2ref</strong>(object_id)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Converts an object id to a reference to the object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#count_objects-class_method" title="count_objects (class method)">.<strong>count_objects</strong>([result_hash])  &#x21d2; Hash </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Counts all objects grouped by type.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#define_finalizer-class_method" title="define_finalizer (class method)">.<strong>define_finalizer</strong>(obj, aProc = proc())  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Adds <em>aProc</em> as a finalizer, to be called after <em>obj</em> was
destroyed.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#each_object-class_method" title="each_object (class method)">.<strong>each_object</strong>(*args)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Calls the block once for each living, nonimmediate object in this Ruby
process.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#garbage_collect-class_method" title="garbage_collect (class method)">.<strong>garbage_collect</strong>(*args)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Initiates garbage collection, unless manually disabled.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#undefine_finalizer-class_method" title="undefine_finalizer (class method)">.<strong>undefine_finalizer</strong>(obj)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Removes all finalizers for <em>obj</em>.</p>
</div></span>
  
</li>

      
    </ul>
  



  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="_id2ref-class_method">
  
    .<strong>_id2ref</strong>(object_id)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Converts an object id to a reference to the object. May not be called on an
object id passed as a parameter to a finalizer.</p>

<pre class="code"><code class=""><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>I am a string</span><span class='tstring_end'>&quot;</span></span>                    <span class='comment'>#=&gt; &quot;I am a string&quot;
</span><span class='id identifier rubyid_r'>r</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="" title="ObjectSpace (module)">ObjectSpace</a></span></span><span class='period'>.</span><span class='id identifier rubyid__id2ref'>_id2ref</span><span class='lparen'>(</span><span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_object_id'>object_id</span><span class='rparen'>)</span>   <span class='comment'>#=&gt; &quot;I am a string&quot;
</span><span class='id identifier rubyid_r'>r</span> <span class='op'>==</span> <span class='id identifier rubyid_s'>s</span>                                 <span class='comment'>#=&gt; true
</span></code></pre>


  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


3105
3106
3107
3108
3109
3110
3111
3112
3113
3114
3115
3116
3117
3118
3119
3120
3121
3122
3123
3124
3125
3126
3127
3128
3129
3130
3131
3132
3133
3134
3135
3136
3137
3138
3139
3140
3141
3142
3143
3144</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'gc.c', line 3105</span>

static VALUE
id2ref(VALUE obj, VALUE objid)
{
#if SIZEOF_LONG == SIZEOF_VOIDP
#define NUM2PTR(x) NUM2ULONG(x)
#elif SIZEOF_LONG_LONG == SIZEOF_VOIDP
#define NUM2PTR(x) NUM2ULL(x)
#endif
    rb_objspace_t *objspace = &amp;rb_objspace;
    VALUE ptr;
    void *p0;

    ptr = NUM2PTR(objid);
    p0 = (void *)ptr;

    if (ptr == Qtrue) return Qtrue;
    if (ptr == Qfalse) return Qfalse;
    if (ptr == Qnil) return Qnil;
    if (FIXNUM_P(ptr)) return (VALUE)ptr;
    if (FLONUM_P(ptr)) return (VALUE)ptr;
    ptr = obj_id_to_ref(objid);

    if ((ptr % sizeof(RVALUE)) == (4 &lt;&lt; 2)) {
        ID symid = ptr / sizeof(RVALUE);
        if (rb_id2str(symid) == 0)
	    rb_raise(rb_eRangeError, &quot;%p is not symbol id value&quot;, p0);
	return ID2SYM(symid);
    }

    if (!is_id_value(objspace, ptr)) {
	rb_raise(rb_eRangeError, &quot;%p is not id value&quot;, p0);
    }
    if (!is_live_object(objspace, ptr)) {
	rb_raise(rb_eRangeError, &quot;%p is recycled object&quot;, p0);
    }
    if (RBASIC(ptr)-&gt;klass == 0) {
	rb_raise(rb_eRangeError, &quot;%p is internal object&quot;, p0);
    }
    return (VALUE)ptr;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="count_objects-class_method">
  
    .<strong>count_objects</strong>([result_hash])  &#x21d2; <tt><span class='object_link'><a href="Hash.html" title="Hash (class)">Hash</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Counts all objects grouped by type.</p>

<p>It returns a hash, such as: 
<pre class="code"><code class="">:TOTAL=&gt;10000,
:FREE=&gt;3011,
:T_OBJECT=&gt;6,
:T_CLASS=&gt;404,
# ...</code></pre>

<p></p>

<p>The contents of the returned hash are implementation specific. It may be
changed in future.</p>

<p>The keys starting with <code>:T_</code> means live objects. For example,
<code>:T_ARRAY</code> is the number of arrays. <code>:FREE</code> means
object slots which is not used now. <code>:TOTAL</code> means sum of above.</p>

<p>If the optional argument <code>result_hash</code> is given, it is
overwritten and returned. This is intended to avoid probe effect.</p>

<pre class="code"><code class=""><span class='id identifier rubyid_h'>h</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
<span class='const'><span class='object_link'><a href="" title="ObjectSpace (module)">ObjectSpace</a></span></span><span class='period'>.</span><span class='id identifier rubyid_count_objects'>count_objects</span><span class='lparen'>(</span><span class='id identifier rubyid_h'>h</span><span class='rparen'>)</span>
<span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_h'>h</span>
<span class='comment'># =&gt; { :TOTAL=&gt;10000, :T_CLASS=&gt;158280, :T_MODULE=&gt;20672, :T_STRING=&gt;527249 }
</span></code></pre>

<p>This method is only expected to work on C Ruby.</p>


  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Hash.html" title="Hash (class)">Hash</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


3390
3391
3392
3393
3394
3395
3396
3397
3398
3399
3400
3401
3402
3403
3404
3405
3406
3407
3408
3409
3410
3411
3412
3413
3414
3415
3416
3417
3418
3419
3420
3421
3422
3423
3424
3425
3426
3427
3428
3429
3430
3431
3432
3433
3434
3435
3436
3437
3438
3439
3440
3441
3442
3443
3444
3445
3446
3447
3448
3449
3450
3451
3452
3453
3454
3455
3456
3457
3458
3459
3460
3461
3462
3463
3464
3465
3466
3467
3468
3469
3470
3471</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'gc.c', line 3390</span>

static VALUE
count_objects(int argc, VALUE *argv, VALUE os)
{
    rb_objspace_t *objspace = &amp;rb_objspace;
    size_t counts[T_MASK+1];
    size_t freed = 0;
    size_t total = 0;
    size_t i;
    VALUE hash;

    if (rb_scan_args(argc, argv, &quot;01&quot;, &amp;hash) == 1) {
        if (!RB_TYPE_P(hash, T_HASH))
            rb_raise(rb_eTypeError, &quot;non-hash given&quot;);
    }

    for (i = 0; i &lt;= T_MASK; i++) {
        counts[i] = 0;
    }

    for (i = 0; i &lt; heap_allocated_pages; i++) {
	struct heap_page *page = heap_pages_sorted[i];
	RVALUE *p, *pend;

	p = page-&gt;start; pend = p + page-&gt;total_slots;
	for (;p &lt; pend; p++) {
	    if (p-&gt;as.basic.flags) {
		counts[BUILTIN_TYPE(p)]++;
	    }
	    else {
		freed++;
	    }
	}
	total += page-&gt;total_slots;
    }

    if (hash == Qnil) {
        hash = rb_hash_new();
    }
    else if (!RHASH_EMPTY_P(hash)) {
        st_foreach(RHASH_TBL_RAW(hash), set_zero, hash);
    }
    rb_hash_aset(hash, ID2SYM(rb_intern(&quot;TOTAL&quot;)), SIZET2NUM(total));
    rb_hash_aset(hash, ID2SYM(rb_intern(&quot;FREE&quot;)), SIZET2NUM(freed));

    for (i = 0; i &lt;= T_MASK; i++) {
        VALUE type;
        switch (i) {
#define COUNT_TYPE(t) case (t): type = ID2SYM(rb_intern(#t)); break;
	    COUNT_TYPE(T_NONE);
	    COUNT_TYPE(T_OBJECT);
	    COUNT_TYPE(T_CLASS);
	    COUNT_TYPE(T_MODULE);
	    COUNT_TYPE(T_FLOAT);
	    COUNT_TYPE(T_STRING);
	    COUNT_TYPE(T_REGEXP);
	    COUNT_TYPE(T_ARRAY);
	    COUNT_TYPE(T_HASH);
	    COUNT_TYPE(T_STRUCT);
	    COUNT_TYPE(T_BIGNUM);
	    COUNT_TYPE(T_FILE);
	    COUNT_TYPE(T_DATA);
	    COUNT_TYPE(T_MATCH);
	    COUNT_TYPE(T_COMPLEX);
	    COUNT_TYPE(T_RATIONAL);
	    COUNT_TYPE(T_NIL);
	    COUNT_TYPE(T_TRUE);
	    COUNT_TYPE(T_FALSE);
	    COUNT_TYPE(T_SYMBOL);
	    COUNT_TYPE(T_FIXNUM);
	    COUNT_TYPE(T_IMEMO);
	    COUNT_TYPE(T_UNDEF);
	    COUNT_TYPE(T_ICLASS);
	    COUNT_TYPE(T_ZOMBIE);
#undef COUNT_TYPE
          default:              type = INT2NUM(i); break;
        }
        if (counts[i])
            rb_hash_aset(hash, type, SIZET2NUM(counts[i]));
    }

    return hash;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="define_finalizer-class_method">
  
    .<strong>define_finalizer</strong>(obj, aProc = proc())  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Adds <em>aProc</em> as a finalizer, to be called after <em>obj</em> was
destroyed. The object ID of the <em>obj</em> will be passed as an argument
to <em>aProc</em>. If <em>aProc</em> is a lambda or method, make sure it
can be called with a single argument.</p>


  </div>
</div>
<div class="tags">
  
  


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


2706
2707
2708
2709
2710
2711
2712
2713
2714
2715
2716
2717
2718
2719
2720
2721</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'gc.c', line 2706</span>

static VALUE
define_final(int argc, VALUE *argv, VALUE os)
{
    VALUE obj, block;

    rb_scan_args(argc, argv, &quot;11&quot;, &amp;obj, &amp;block);
    should_be_finalizable(obj);
    if (argc == 1) {
	block = rb_block_proc();
    }
    else {
	should_be_callable(block);
    }

    return define_final0(obj, block);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="each_object-class_method">
  
    
      <span class="overload">.<strong>each_object</strong>([) {|obj| ... } &#x21d2; <tt><span class='object_link'><a href="Integer.html" title="Integer (class)">Integer</a></span></tt> </span>
    
      <span class="overload">.<strong>each_object</strong>([)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> </span>
    
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Calls the block once for each living, nonimmediate object in this Ruby
process. If <em>module</em> is specified, calls the block for only those
classes or modules that match (or are a subclass of) <em>module</em>.
Returns the number of objects found. Immediate objects
(<code>Fixnum</code>s, <code>Symbol</code>s <code>true</code>,
<code>false</code>, and <code>nil</code>) are never returned. In the
example below, <code>each_object</code> returns both the numbers we defined
and several constants defined in the <code>Math</code> module.</p>

<p>If no block is given, an enumerator is returned instead.</p>

<pre class="code"><code class=""><span class='id identifier rubyid_a'>a</span> <span class='op'>=</span> <span class='float'>102.7</span>
<span class='id identifier rubyid_b'>b</span> <span class='op'>=</span> <span class='int'>95</span>       <span class='comment'># Won&#39;t be returned
</span><span class='id identifier rubyid_c'>c</span> <span class='op'>=</span> <span class='int'>12345678987654321</span>
<span class='id identifier rubyid_count'>count</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="" title="ObjectSpace (module)">ObjectSpace</a></span></span><span class='period'>.</span><span class='id identifier rubyid_each_object'>each_object</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="Numeric.html" title="Numeric (class)">Numeric</a></span></span><span class='rparen'>)</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_x'>x</span> <span class='rbrace'>}</span>
<span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Total count: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_count'>count</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
</code></pre>

<p><em>produces:</em></p>

<pre class="code"><code class=""><span class='int'>12345678987654321</span>
<span class='float'>102.7</span>
<span class='float'>2.71828182845905</span>
<span class='float'>3.14159265358979</span>
<span class='float'>2.22044604925031e-16</span>
<span class='float'>1.7976931348623157e+308</span>
<span class='float'>2.2250738585072e-308</span>
<span class='const'>Total</span> <span class='label'>count:</span> <span class='int'>7</span>
</code></pre>


  </div>
</div>
<div class="tags">
  
  <p class="tag_title">Overloads:</p>
  <ul class="overload">
    
      
      <li class="overload_item">
        <span class="signature">.<strong>each_object</strong>([) {|obj| ... } &#x21d2; <tt><span class='object_link'><a href="Integer.html" title="Integer (class)">Integer</a></span></tt> </span>
        <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt>obj</tt>)</span>
      
      
      
    </li>
  
</ul>
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Integer.html" title="Integer (class)">Integer</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div>
      </li>
    
      
  </ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


2637
2638
2639
2640
2641
2642
2643
2644
2645
2646
2647
2648
2649
2650</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'gc.c', line 2637</span>

static VALUE
os_each_obj(int argc, VALUE *argv, VALUE os)
{
    VALUE of;

    if (argc == 0) {
	of = 0;
    }
    else {
	rb_scan_args(argc, argv, &quot;01&quot;, &amp;of);
    }
    RETURN_ENUMERATOR(os, 1, &amp;of);
    return os_obj_of(of);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="garbage_collect-class_method">
  
    
      <span class="overload">.<strong>start</strong>  &#x21d2; <tt>nil</tt> </span>
    
      <span class="overload">.<strong>garbage_collect</strong>  &#x21d2; <tt>nil</tt> </span>
    
      <span class="overload">.<strong>GC</strong>  &#x21d2; <tt>nil</tt> </span>
    
      <span class="overload">.<strong>start</strong>(full_mark: true, immediate_sweep: true)  &#x21d2; <tt>nil</tt> </span>
    
      <span class="overload">.<strong>garbage_collect</strong>(full_mark: true, immediate_sweep: true)  &#x21d2; <tt>nil</tt> </span>
    
      <span class="overload">.<strong>GC</strong>  &#x21d2; <tt>nil</tt> </span>
    
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Initiates garbage collection, unless manually disabled.</p>

<p>This method is defined with keyword arguments that default to true:</p>

<pre class="code"><code class=""><span class='kw'>def</span> <span class='const'><span class='object_link'><a href="GC.html" title="GC (module)">GC</a></span></span><span class='period'>.</span><span class='id identifier rubyid_start'><span class='object_link'><a href="GC.html#start-class_method" title="GC.start (method)">start</a></span></span><span class='lparen'>(</span><span class='label'>full_mark:</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='label'>immediate_sweep:</span> <span class='kw'>true</span><span class='rparen'>)</span><span class='semicolon'>;</span> <span class='kw'>end</span>
</code></pre>

<p>Use full_mark: false to perform a minor GC. Use immediate_sweep: false to
defer sweeping (use lazy sweep).</p>

<p>Note: These keyword arguments are implementation and version dependent.
They are not guaranteed to be future-compatible, and may be ignored if the
underlying implementation does not support them.</p>


  </div>
</div>
<div class="tags">
  
  <p class="tag_title">Overloads:</p>
  <ul class="overload">
    
      
      <li class="overload_item">
        <span class="signature">.<strong>start</strong>  &#x21d2; <tt>nil</tt> </span>
        <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
    </li>
  
</ul>

</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">.<strong>garbage_collect</strong>  &#x21d2; <tt>nil</tt> </span>
        <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
    </li>
  
</ul>

</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">.<strong>GC</strong>  &#x21d2; <tt>nil</tt> </span>
        <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
    </li>
  
</ul>

</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">.<strong>start</strong>(full_mark: true, immediate_sweep: true)  &#x21d2; <tt>nil</tt> </span>
        <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
    </li>
  
</ul>

</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">.<strong>garbage_collect</strong>(full_mark: true, immediate_sweep: true)  &#x21d2; <tt>nil</tt> </span>
        <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
    </li>
  
</ul>

</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">.<strong>GC</strong>  &#x21d2; <tt>nil</tt> </span>
        <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
    </li>
  
</ul>

</div>
      </li>
    
  </ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


6707
6708
6709
6710
6711
6712
6713
6714
6715
6716
6717
6718
6719
6720
6721
6722
6723
6724
6725
6726
6727
6728
6729
6730
6731
6732
6733
6734
6735
6736
6737</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'gc.c', line 6707</span>

static VALUE
gc_start_internal(int argc, VALUE *argv, VALUE self)
{
    rb_objspace_t *objspace = &amp;rb_objspace;
    int full_mark = TRUE, immediate_mark = TRUE, immediate_sweep = TRUE;
    VALUE opt = Qnil;
    static ID keyword_ids[3];

    rb_scan_args(argc, argv, &quot;0:&quot;, &amp;opt);

    if (!NIL_P(opt)) {
	VALUE kwvals[3];

	if (!keyword_ids[0]) {
	    keyword_ids[0] = rb_intern(&quot;full_mark&quot;);
	    keyword_ids[1] = rb_intern(&quot;immediate_mark&quot;);
	    keyword_ids[2] = rb_intern(&quot;immediate_sweep&quot;);
	}

	rb_get_kwargs(opt, keyword_ids, 0, 3, kwvals);

	if (kwvals[0] != Qundef) full_mark = RTEST(kwvals[0]);
	if (kwvals[1] != Qundef) immediate_mark = RTEST(kwvals[1]);
	if (kwvals[2] != Qundef) immediate_sweep = RTEST(kwvals[2]);
    }

    garbage_collect(objspace, full_mark, immediate_mark, immediate_sweep, GPR_FLAG_METHOD);
    gc_finalize_deferred(objspace);

    return Qnil;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="undefine_finalizer-class_method">
  
    .<strong>undefine_finalizer</strong>(obj)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Removes all finalizers for <em>obj</em>.</p>


  </div>
</div>
<div class="tags">
  
  


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


2660
2661
2662
2663
2664</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'gc.c', line 2660</span>

static VALUE
undefine_final(VALUE os, VALUE obj)
{
    return rb_undefine_finalizer(obj);
}</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Mon Feb 26 22:23:13 2018 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.12 (ruby-2.4.2).
</div>

    </div>
  </body>
</html>