<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: CSV
  
    &mdash; Documentation by YARD 0.9.12
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "CSV";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index (C)</a> &raquo;
    
    
    <span class="title">CSV</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: CSV
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName"><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></li>
          
            <li class="next">CSV</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  <dl>
      <dt>Extended by:</dt>
      <dd><span class='object_link'><a href="Forwardable.html" title="Forwardable (module)">Forwardable</a></span></dd>
  </dl>
  
  
  
  <dl>
      <dt>Includes:</dt>
      <dd><span class='object_link'><a href="Enumerable.html" title="Enumerable (module)">Enumerable</a></span></dd>
  </dl>
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/csv.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>This class provides a complete interface to CSV files and data.  It offers
tools to enable you to read and write to and from Strings or IO objects, as
needed.</p>

<h2 id="label-Reading">Reading</h2>

<h3 id="label-From+a+File">From a File</h3>

<h4 id="label-A+Line+at+a+Time">A Line at a Time</h4>

<pre class="code ruby"><code class="ruby"><span class='const'>CSV</span><span class='period'>.</span><span class='id identifier rubyid_foreach'><span class='object_link'><a href="#foreach-class_method" title="CSV.foreach (method)">foreach</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/file.csv</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
  <span class='comment'># use row here...
</span><span class='kw'>end</span>
</code></pre>

<h4 id="label-All+at+Once">All at Once</h4>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_arr_of_arrs'>arr_of_arrs</span> <span class='op'>=</span> <span class='const'>CSV</span><span class='period'>.</span><span class='id identifier rubyid_read'><span class='object_link'><a href="#read-class_method" title="CSV.read (method)">read</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/file.csv</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
</code></pre>

<h3 id="label-From+a+String">From a String</h3>

<h4 id="label-A+Line+at+a+Time">A Line at a Time</h4>

<pre class="code ruby"><code class="ruby"><span class='const'>CSV</span><span class='period'>.</span><span class='id identifier rubyid_parse'><span class='object_link'><a href="#parse-class_method" title="CSV.parse (method)">parse</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>CSV,data,String</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
  <span class='comment'># use row here...
</span><span class='kw'>end</span>
</code></pre>

<h4 id="label-All+at+Once">All at Once</h4>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_arr_of_arrs'>arr_of_arrs</span> <span class='op'>=</span> <span class='const'>CSV</span><span class='period'>.</span><span class='id identifier rubyid_parse'><span class='object_link'><a href="#parse-class_method" title="CSV.parse (method)">parse</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>CSV,data,String</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
</code></pre>

<h2 id="label-Writing">Writing</h2>

<h3 id="label-To+a+File">To a File</h3>

<pre class="code ruby"><code class="ruby"><span class='const'>CSV</span><span class='period'>.</span><span class='id identifier rubyid_open'><span class='object_link'><a href="#open-class_method" title="CSV.open (method)">open</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/file.csv</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>wb</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_csv'>csv</span><span class='op'>|</span>
  <span class='id identifier rubyid_csv'>csv</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>row</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>of</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>CSV</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>data</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_csv'>csv</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>another</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>row</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
  <span class='comment'># ...
</span><span class='kw'>end</span>
</code></pre>

<h3 id="label-To+a+String">To a String</h3>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_csv_string'>csv_string</span> <span class='op'>=</span> <span class='const'>CSV</span><span class='period'>.</span><span class='id identifier rubyid_generate'><span class='object_link'><a href="#generate-class_method" title="CSV.generate (method)">generate</a></span></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_csv'>csv</span><span class='op'>|</span>
  <span class='id identifier rubyid_csv'>csv</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>row</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>of</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>CSV</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>data</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_csv'>csv</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>another</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>row</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
  <span class='comment'># ...
</span><span class='kw'>end</span>
</code></pre>

<h2 id="label-Convert+a+Single+Line">Convert a Single Line</h2>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_csv_string'>csv_string</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>CSV</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>data</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_csv'>to_csv</span>   <span class='comment'># to CSV
</span><span class='id identifier rubyid_csv_array'>csv_array</span>  <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>CSV,String</span><span class='tstring_end'>&quot;</span></span><span class='period'>.</span><span class='id identifier rubyid_parse_csv'>parse_csv</span>   <span class='comment'># from CSV
</span></code></pre>

<h2 id="label-Shortcut+Interface">Shortcut Interface</h2>

<pre class="code ruby"><code class="ruby"><span class='const'>CSV</span>             <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_csv_out'>csv_out</span><span class='op'>|</span> <span class='id identifier rubyid_csv_out'>csv_out</span> <span class='op'>&lt;&lt;</span> <span class='qwords_beg'>%w{</span><span class='tstring_content'>my</span><span class='words_sep'> </span><span class='tstring_content'>data</span><span class='words_sep'> </span><span class='tstring_content'>here</span><span class='words_sep'>}</span> <span class='rbrace'>}</span>  <span class='comment'># to $stdout
</span><span class='const'>CSV</span><span class='lparen'>(</span><span class='id identifier rubyid_csv'>csv</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>   <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_csv_str'>csv_str</span><span class='op'>|</span> <span class='id identifier rubyid_csv_str'>csv_str</span> <span class='op'>&lt;&lt;</span> <span class='qwords_beg'>%w{</span><span class='tstring_content'>my</span><span class='words_sep'> </span><span class='tstring_content'>data</span><span class='words_sep'> </span><span class='tstring_content'>here</span><span class='words_sep'>}</span> <span class='rbrace'>}</span>  <span class='comment'># to a String
</span><span class='const'>CSV</span><span class='lparen'>(</span><span class='gvar'>$stderr</span><span class='rparen'>)</span>    <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_csv_err'>csv_err</span><span class='op'>|</span> <span class='id identifier rubyid_csv_err'>csv_err</span> <span class='op'>&lt;&lt;</span> <span class='qwords_beg'>%w{</span><span class='tstring_content'>my</span><span class='words_sep'> </span><span class='tstring_content'>data</span><span class='words_sep'> </span><span class='tstring_content'>here</span><span class='words_sep'>}</span> <span class='rbrace'>}</span>  <span class='comment'># to $stderr
</span><span class='const'>CSV</span><span class='lparen'>(</span><span class='gvar'>$stdin</span><span class='rparen'>)</span>     <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_csv_in'>csv_in</span><span class='op'>|</span>  <span class='id identifier rubyid_csv_in'>csv_in</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span> <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_row'>row</span> <span class='rbrace'>}</span> <span class='rbrace'>}</span>  <span class='comment'># from $stdin
</span></code></pre>

<h2 id="label-Advanced+Usage">Advanced Usage</h2>

<h3 id="label-Wrap+an+IO+Object">Wrap an IO Object</h3>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_csv'>csv</span> <span class='op'>=</span> <span class='const'>CSV</span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="CSV#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_io'>io</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><span class='object_link'><a href="OptionParser/Arguable.html#options-instance_method" title="OptionParser::Arguable#options (method)">options</a></span></span><span class='rparen'>)</span>
<span class='comment'># ... read (with gets() or each()) from and write (with &lt;&lt;) to csv here ...
</span></code></pre>

<h2 id="label-CSV+and+Character+Encodings+-28M17n+or+Multilingualization-29">CSV and Character Encodings (M17n or Multilingualization)</h2>

<p>This new CSV parser is m17n savvy.  The parser works in the Encoding of the
IO or String object being read from or written to.  Your data is never
transcoded (unless you ask Ruby to transcode it for you) and will literally
be parsed in the Encoding it is in.  Thus CSV will return Arrays or Rows of
Strings in the Encoding of your data.  This is accomplished by transcoding
the parser itself into your Encoding.</p>

<p>Some transcoding must take place, of course, to accomplish this
multiencoding support.  For example, <code>:col_sep</code>,
<code>:row_sep</code>, and <code>:quote_char</code> must be transcoded to
match your data.  Hopefully this makes the entire process feel transparent,
since CSV&#39;s defaults should just magically work for your data. 
However, you can set these values manually in the target Encoding to avoid
the translation.</p>

<p>It&#39;s also important to note that while all of CSV&#39;s core parser is
now Encoding agnostic, some features are not.  For example, the built-in
converters will try to transcode data to UTF-8 before making conversions.
Again, you can provide custom converters that are aware of your Encodings
to avoid this translation.  It&#39;s just too hard for me to support native
conversions in all of Ruby&#39;s Encodings.</p>

<p>Anyway, the practical side of this is simple:  make sure IO and String
objects passed into CSV have the proper Encoding set and everything should
just work. CSV methods that allow you to open IO objects (CSV::foreach(),
CSV::open(), CSV::read(), and CSV::readlines()) do allow you to specify the
Encoding.</p>

<p>One minor exception comes when generating CSV into a String with an
Encoding that is not ASCII compatible.  There&#39;s no existing data for
CSV to use to prepare itself and thus you will probably need to manually
specify the desired Encoding for most of those cases.  It will try to guess
using the fields in a row of output though, when using CSV::generate_line()
or Array#to_csv().</p>

<p>I try to point out any other Encoding issues in the documentation of
methods as they come up.</p>

<p>This has been tested to the best of my ability with all non-“dummy”
Encodings Ruby ships with.  However, it is brave new code and may have some
bugs. Please feel free to <a
href="mailto:james@grayproductions.net">report</a> any issues you find with
it.</p>


  </div>
</div>
<div class="tags">
  

</div><h2>Defined Under Namespace</h2>
<p class="children">
  
    
  
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="CSV/FieldInfo.html" title="CSV::FieldInfo (class)">FieldInfo</a></span>, <span class='object_link'><a href="CSV/MalformedCSVError.html" title="CSV::MalformedCSVError (class)">MalformedCSVError</a></span>, <span class='object_link'><a href="CSV/Row.html" title="CSV::Row (class)">Row</a></span>, <span class='object_link'><a href="CSV/Table.html" title="CSV::Table (class)">Table</a></span>
    
  
</p>

  <h2>Constant Summary</h2>
  <dl class="constants">
    
      <dt id="VERSION-constant" class="">VERSION =
        <div class="docstring">
  <div class="discussion">
    
<p>The version of the installed library.</p>


  </div>
</div>
<div class="tags">
  

</div>
      </dt>
      <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>2.4.8</span><span class='tstring_end'>&quot;</span></span></pre></dd>
    
      <dt id="DateMatcher-constant" class="">DateMatcher =
        <div class="docstring">
  <div class="discussion">
    
<p>A Regexp used to find and convert some common Date formats.</p>


  </div>
</div>
<div class="tags">
  

</div>
      </dt>
      <dd><pre class="code"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'> \A(?: (\w+,?\s+)?\w+\s+\d{1,2},?\s+\d{2,4} |
\d{4}-\d{2}-\d{2} )\z </span><span class='regexp_end'>/x</span></span></pre></dd>
    
      <dt id="DateTimeMatcher-constant" class="">DateTimeMatcher =
        <div class="docstring">
  <div class="discussion">
    
<p>A Regexp used to find and convert some common DateTime formats.</p>


  </div>
</div>
<div class="tags">
  

</div>
      </dt>
      <dd><pre class="code"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'> \A(?: (\w+,?\s+)?\w+\s+\d{1,2}\s+\d{1,2}:\d{1,2}:\d{1,2},?\s+\d{2,4} |
\d{4}-\d{2}-\d{2}\s\d{2}:\d{2}:\d{2} )\z </span><span class='regexp_end'>/x</span></span></pre></dd>
    
      <dt id="ConverterEncoding-constant" class="">ConverterEncoding =
        <div class="docstring">
  <div class="discussion">
    
<p>The encoding used by all converters.</p>


  </div>
</div>
<div class="tags">
  

</div>
      </dt>
      <dd><pre class="code"><span class='const'>Encoding</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UTF-8</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span></pre></dd>
    
      <dt id="Converters-constant" class="">Converters =
        <div class="docstring">
  <div class="discussion">
    
<p>This Hash holds the built-in converters of CSV that can be accessed by
name. You can select Converters with CSV.convert() or through the
<code>options</code> Hash passed to CSV::new().</p>
<dl class="rdoc-list note-list"><dt><strong><code>:integer</code></strong>
<dd>
<p>Converts any field Integer() accepts.</p>
</dd><dt><strong><code>:float</code></strong>
<dd>
<p>Converts any field Float() accepts.</p>
</dd><dt><strong><code>:numeric</code></strong>
<dd>
<p>A combination of <code>:integer</code> and <code>:float</code>.</p>
</dd><dt><strong><code>:date</code></strong>
<dd>
<p>Converts any field Date::parse() accepts.</p>
</dd><dt><strong><code>:date_time</code></strong>
<dd>
<p>Converts any field DateTime::parse() accepts.</p>
</dd><dt><strong><code>:all</code></strong>
<dd>
<p>All built-in converters.  A combination of <code>:date_time</code> and
<code>:numeric</code>.</p>
</dd></dl>

<p>All built-in converters transcode field data to UTF-8 before attempting a
conversion.  If your data cannot be transcoded to UTF-8 the conversion will
fail and the field will remain unchanged.</p>

<p>This Hash is intentionally left unfrozen and users should feel free to add
values to it that can be accessed by all CSV objects.</p>

<p>To add a combo field, the value should be an Array of names.  Combo fields
can be nested with other combo fields.</p>


  </div>
</div>
<div class="tags">
  

</div>
      </dt>
      <dd><pre class="code"><span class='lbrace'>{</span>
  <span class='label'>integer:</span>   <span class='id identifier rubyid_lambda'>lambda</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span>
    <span class='const'><span class='object_link'><a href="Integer.html" title="Integer (class)">Integer</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_encode'>encode</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="#ConverterEncoding-constant" title="CSV::ConverterEncoding (constant)">ConverterEncoding</a></span></span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='kw'>rescue</span> <span class='id identifier rubyid_f'>f</span>
  <span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='label'>float:</span>     <span class='id identifier rubyid_lambda'>lambda</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span>
    <span class='const'><span class='object_link'><a href="Float.html" title="Float (class)">Float</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_encode'>encode</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="#ConverterEncoding-constant" title="CSV::ConverterEncoding (constant)">ConverterEncoding</a></span></span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='kw'>rescue</span> <span class='id identifier rubyid_f'>f</span>
  <span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='label'>numeric:</span>   <span class='lbracket'>[</span><span class='symbol'>:integer</span><span class='comma'>,</span> <span class='symbol'>:float</span><span class='rbracket'>]</span><span class='comma'>,</span>
  <span class='label'>date:</span>      <span class='id identifier rubyid_lambda'>lambda</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span>
    <span class='kw'>begin</span>
      <span class='id identifier rubyid_e'>e</span> <span class='op'>=</span> <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_encode'>encode</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="#ConverterEncoding-constant" title="CSV::ConverterEncoding (constant)">ConverterEncoding</a></span></span><span class='rparen'>)</span>
      <span class='id identifier rubyid_e'>e</span> <span class='op'>=~</span> <span class='const'><span class='object_link'><a href="#DateMatcher-constant" title="CSV::DateMatcher (constant)">DateMatcher</a></span></span> <span class='op'>?</span> <span class='const'><span class='object_link'><a href="Date.html" title="Date (class)">Date</a></span></span><span class='period'>.</span><span class='id identifier rubyid_parse'><span class='object_link'><a href="Date.html#parse-class_method" title="Date.parse (method)">parse</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_e'>e</span><span class='rparen'>)</span> <span class='op'>:</span> <span class='id identifier rubyid_f'>f</span>
    <span class='kw'>rescue</span>  <span class='comment'># encoding conversion or date parse errors
</span>      <span class='id identifier rubyid_f'>f</span>
    <span class='kw'>end</span>
  <span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='label'>date_time:</span> <span class='id identifier rubyid_lambda'>lambda</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span>
    <span class='kw'>begin</span>
      <span class='id identifier rubyid_e'>e</span> <span class='op'>=</span> <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_encode'>encode</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="#ConverterEncoding-constant" title="CSV::ConverterEncoding (constant)">ConverterEncoding</a></span></span><span class='rparen'>)</span>
      <span class='id identifier rubyid_e'>e</span> <span class='op'>=~</span> <span class='const'><span class='object_link'><a href="#DateTimeMatcher-constant" title="CSV::DateTimeMatcher (constant)">DateTimeMatcher</a></span></span> <span class='op'>?</span> <span class='const'><span class='object_link'><a href="DateTime.html" title="DateTime (class)">DateTime</a></span></span><span class='period'>.</span><span class='id identifier rubyid_parse'><span class='object_link'><a href="DateTime.html#parse-class_method" title="DateTime.parse (method)">parse</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_e'>e</span><span class='rparen'>)</span> <span class='op'>:</span> <span class='id identifier rubyid_f'>f</span>
    <span class='kw'>rescue</span>  <span class='comment'># encoding conversion or date parse errors
</span>      <span class='id identifier rubyid_f'>f</span>
    <span class='kw'>end</span>
  <span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='label'>all:</span>       <span class='lbracket'>[</span><span class='symbol'>:date_time</span><span class='comma'>,</span> <span class='symbol'>:numeric</span><span class='rbracket'>]</span><span class='comma'>,</span>
<span class='rbrace'>}</span></pre></dd>
    
      <dt id="HeaderConverters-constant" class="">HeaderConverters =
        <div class="docstring">
  <div class="discussion">
    
<p>This Hash holds the built-in header converters of CSV that can be accessed
by name.  You can select HeaderConverters with CSV.header_convert() or
through the <code>options</code> Hash passed to CSV::new().</p>
<dl class="rdoc-list note-list"><dt><strong><code>:downcase</code></strong>
<dd>
<p>Calls downcase() on the header String.</p>
</dd><dt><strong><code>:symbol</code></strong>
<dd>
<p>Leading/trailing spaces are dropped, string is downcased, remaining spaces
are replaced with underscores, non-word characters are dropped, and finally
to_sym() is called.</p>
</dd></dl>

<p>All built-in header converters transcode header data to UTF-8 before
attempting a conversion.  If your data cannot be transcoded to UTF-8 the
conversion will fail and the header will remain unchanged.</p>

<p>This Hash is intentionally left unfrozen and users should feel free to add
values to it that can be accessed by all CSV objects.</p>

<p>To add a combo field, the value should be an Array of names.  Combo fields
can be nested with other combo fields.</p>


  </div>
</div>
<div class="tags">
  

</div>
      </dt>
      <dd><pre class="code"><span class='lbrace'>{</span>
  <span class='label'>downcase:</span> <span class='id identifier rubyid_lambda'>lambda</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_h'>h</span><span class='op'>|</span> <span class='id identifier rubyid_h'>h</span><span class='period'>.</span><span class='id identifier rubyid_encode'>encode</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="#ConverterEncoding-constant" title="CSV::ConverterEncoding (constant)">ConverterEncoding</a></span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span> <span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='label'>symbol:</span>   <span class='id identifier rubyid_lambda'>lambda</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_h'>h</span><span class='op'>|</span>
    <span class='id identifier rubyid_h'>h</span><span class='period'>.</span><span class='id identifier rubyid_encode'>encode</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="#ConverterEncoding-constant" title="CSV::ConverterEncoding (constant)">ConverterEncoding</a></span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[^\s\w]+</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span><span class='period'>.</span>
                                         <span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\s+</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>_</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span>
  <span class='rbrace'>}</span>
<span class='rbrace'>}</span></pre></dd>
    
      <dt id="DEFAULT_OPTIONS-constant" class="">DEFAULT_OPTIONS =
        <div class="docstring">
  <div class="discussion">
    
<p>The options used when no overrides are given by calling code.  They are:</p>
<dl class="rdoc-list note-list"><dt><strong><code>:col_sep</code></strong>
<dd>
<p><code>&quot;,&quot;</code></p>
</dd><dt><strong><code>:row_sep</code></strong>
<dd>
<p><code>:auto</code></p>
</dd><dt><strong><code>:quote_char</code></strong>
<dd>
<p><code>&#39;&quot;&#39;</code></p>
</dd><dt><strong><code>:field_size_limit</code></strong>
<dd>
<p><code>nil</code></p>
</dd><dt><strong><code>:converters</code></strong>
<dd>
<p><code>nil</code></p>
</dd><dt><strong><code>:unconverted_fields</code></strong>
<dd>
<p><code>nil</code></p>
</dd><dt><strong><code>:headers</code></strong>
<dd>
<p><code>false</code></p>
</dd><dt><strong><code>:return_headers</code></strong>
<dd>
<p><code>false</code></p>
</dd><dt><strong><code>:header_converters</code></strong>
<dd>
<p><code>nil</code></p>
</dd><dt><strong><code>:skip_blanks</code></strong>
<dd>
<p><code>false</code></p>
</dd><dt><strong><code>:force_quotes</code></strong>
<dd>
<p><code>false</code></p>
</dd><dt><strong><code>:skip_lines</code></strong>
<dd>
<p><code>nil</code></p>
</dd><dt><strong><code>:liberal_parsing</code></strong>
<dd>
<p><code>false</code></p>
</dd></dl>


  </div>
</div>
<div class="tags">
  

</div>
      </dt>
      <dd><pre class="code"><span class='lbrace'>{</span>
  <span class='label'>col_sep:</span>            <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>,</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='label'>row_sep:</span>            <span class='symbol'>:auto</span><span class='comma'>,</span>
  <span class='label'>quote_char:</span>         <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&quot;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
  <span class='label'>field_size_limit:</span>   <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='label'>converters:</span>         <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='label'>unconverted_fields:</span> <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='label'>headers:</span>            <span class='kw'>false</span><span class='comma'>,</span>
  <span class='label'>return_headers:</span>     <span class='kw'>false</span><span class='comma'>,</span>
  <span class='label'>header_converters:</span>  <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='label'>skip_blanks:</span>        <span class='kw'>false</span><span class='comma'>,</span>
  <span class='label'>force_quotes:</span>       <span class='kw'>false</span><span class='comma'>,</span>
  <span class='label'>skip_lines:</span>         <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='label'>liberal_parsing:</span>    <span class='kw'>false</span><span class='comma'>,</span>
<span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
    
  </dl>



  
  
  <h3 class="inherited">Constants included
     from <span class='object_link'><a href="Forwardable.html" title="Forwardable (module)">Forwardable</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Forwardable.html#FILE_REGEXP-constant" title="Forwardable::FILE_REGEXP (constant)">Forwardable::FILE_REGEXP</a></span>, <span class='object_link'><a href="Forwardable.html#FILTER_EXCEPTION-constant" title="Forwardable::FILTER_EXCEPTION (constant)">Forwardable::FILTER_EXCEPTION</a></span>, <span class='object_link'><a href="Forwardable.html#FORWARDABLE_VERSION-constant" title="Forwardable::FORWARDABLE_VERSION (constant)">Forwardable::FORWARDABLE_VERSION</a></span></p>


  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#col_sep-instance_method" title="#col_sep (instance method)">#<strong>col_sep</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The encoded <code>:col_sep</code> used in parsing and writing.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#encoding-instance_method" title="#encoding (instance method)">#<strong>encoding</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The Encoding CSV is parsing or writing in.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#field_size_limit-instance_method" title="#field_size_limit (instance method)">#<strong>field_size_limit</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The limit for field size, if any.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#line-instance_method" title="#line (instance method)">#<strong>line</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The line number of the last row read from this file.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#lineno-instance_method" title="#lineno (instance method)">#<strong>lineno</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The line number of the last row read from this file.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#quote_char-instance_method" title="#quote_char (instance method)">#<strong>quote_char</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The encoded <code>:quote_char</code> used in parsing and writing.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#row_sep-instance_method" title="#row_sep (instance method)">#<strong>row_sep</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The encoded <code>:row_sep</code> used in parsing and writing.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#skip_lines-instance_method" title="#skip_lines (instance method)">#<strong>skip_lines</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The regex marking a line as a comment.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#filter-class_method" title="filter (class method)">.<strong>filter</strong>(input = nil, output = nil, **options)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>:call-seq:   filter( **options ) { |row| … }   filter( input, **options ) {
|row| … }   filter( input, output, **options ) { |row| … }.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#foreach-class_method" title="foreach (class method)">.<strong>foreach</strong>(path, **options, &amp;block)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>This method is intended as the primary interface for reading CSV files.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#generate-class_method" title="generate (class method)">.<strong>generate</strong>(str = nil, **options) {|csv| ... } &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>:call-seq:   generate( str, **options ) { |csv| … }   generate( **options )
{ |csv| … }.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#generate_line-class_method" title="generate_line (class method)">.<strong>generate_line</strong>(row, **options)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>This method is a shortcut for converting a single row (Array) into a CSV
String.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#instance-class_method" title="instance (class method)">.<strong>instance</strong>(data = $stdout, **options)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>This method will return a CSV instance, just like CSV::new(), but the
instance will be cached and returned for all future calls to this method
for the same <code>data</code> object (tested by Object#object_id()) with
the same <code>options</code>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#open-class_method" title="open (class method)">.<strong>open</strong>(filename, mode = &quot;r&quot;, **options)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>:call-seq:   open( filename, mode = “rb”, **options ) { |faster_csv| … }  
open( filename, **options ) { |faster_csv| … }   open( filename, mode =
“rb”, **options )   open( filename, **options ).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#parse-class_method" title="parse (class method)">.<strong>parse</strong>(*args, &amp;block)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>:call-seq:   parse( str, **options ) { |row| … }   parse( str, **options ).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#parse_line-class_method" title="parse_line (class method)">.<strong>parse_line</strong>(line, **options)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>This method is a shortcut for converting a single line of a CSV String into
an Array.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#read-class_method" title="read (class method)">.<strong>read</strong>(path, *options)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Use to slurp a CSV file into an Array of Arrays.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#readlines-class_method" title="readlines (class method)">.<strong>readlines</strong>(*args)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Alias for CSV::read().</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#table-class_method" title="table (class method)">.<strong>table</strong>(path, **options)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>A shortcut for:.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#<<-instance_method" title="#&lt;&lt; (instance method)">#<strong>&lt;&lt;</strong>(row)  &#x21d2; Object </a>
    

    
      (also: #add_row, #puts)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The primary write method for wrapped Strings and IOs, <code>row</code> (an
Array or CSV::Row) is converted to CSV and appended to the data source.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#convert-instance_method" title="#convert (instance method)">#<strong>convert</strong>(name = nil, &amp;converter)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>:call-seq:   convert( name )   convert { |field| … }   convert { |field,
field_info| … }.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#converters-instance_method" title="#converters (instance method)">#<strong>converters</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the current list of converters in effect.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#each-instance_method" title="#each (instance method)">#<strong>each</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Yields each row of the data source in turn.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#force_quotes%3F-instance_method" title="#force_quotes? (instance method)">#<strong>force_quotes?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns <code>true</code> if all output fields are quoted.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#header_convert-instance_method" title="#header_convert (instance method)">#<strong>header_convert</strong>(name = nil, &amp;converter)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>:call-seq:   header_convert( name )   header_convert { |field| … }  
header_convert { |field, field_info| … }.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#header_converters-instance_method" title="#header_converters (instance method)">#<strong>header_converters</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the current list of converters in effect for headers.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#header_row%3F-instance_method" title="#header_row? (instance method)">#<strong>header_row?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns <code>true</code> if the next row read will be a header row.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#headers-instance_method" title="#headers (instance method)">#<strong>headers</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns <code>nil</code> if headers will not be used, <code>true</code> if
they will but have not yet been read, or the actual headers after they have
been read.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(data, col_sep: &quot;,&quot;, row_sep: :auto, quote_char: &#39;&quot;&#39;, field_size_limit: nil, converters: nil, unconverted_fields: nil, headers: false, return_headers: false, write_headers: nil, header_converters: nil, skip_blanks: false, force_quotes: false, skip_lines: nil, liberal_parsing: false, internal_encoding: nil, external_encoding: nil, encoding: nil)  &#x21d2; CSV </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>This constructor will wrap either a String or IO object passed in
<code>data</code> for reading and/or writing.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#inspect-instance_method" title="#inspect (instance method)">#<strong>inspect</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns a simplified description of the key CSV attributes in an ASCII
compatible String.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#liberal_parsing%3F-instance_method" title="#liberal_parsing? (instance method)">#<strong>liberal_parsing?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns <code>true</code> if illegal input is handled.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#read-instance_method" title="#read (instance method)">#<strong>read</strong>  &#x21d2; Object </a>
    

    
      (also: #readlines)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Slurps the remaining rows and returns an Array of Arrays.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#return_headers%3F-instance_method" title="#return_headers? (instance method)">#<strong>return_headers?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns <code>true</code> if headers will be returned as a row of results.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#rewind-instance_method" title="#rewind (instance method)">#<strong>rewind</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Rewinds the underlying IO object and resets CSV&#39;s lineno() counter.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#shift-instance_method" title="#shift (instance method)">#<strong>shift</strong>  &#x21d2; Object </a>
    

    
      (also: #gets, #readline)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The primary read method for wrapped Strings and IOs, a single row is pulled
from the data source, parsed and returned as an Array of fields (if header
rows are not used) or a CSV::Row (when header rows are used).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#skip_blanks%3F-instance_method" title="#skip_blanks? (instance method)">#<strong>skip_blanks?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns <code>true</code> blank lines are skipped by the parser.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#unconverted_fields%3F-instance_method" title="#unconverted_fields? (instance method)">#<strong>unconverted_fields?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns <code>true</code> if unconverted_fields() to parsed results.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#write_headers%3F-instance_method" title="#write_headers? (instance method)">#<strong>write_headers?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns <code>true</code> if headers are written in output.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Forwardable.html" title="Forwardable (module)">Forwardable</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Forwardable.html#_compile_method-class_method" title="Forwardable._compile_method (method)">_compile_method</a></span>, <span class='object_link'><a href="Forwardable.html#_delegator_method-class_method" title="Forwardable._delegator_method (method)">_delegator_method</a></span>, <span class='object_link'><a href="Forwardable.html#_valid_method%3F-class_method" title="Forwardable._valid_method? (method)">_valid_method?</a></span>, <span class='object_link'><a href="Forwardable.html#def_instance_delegator-instance_method" title="Forwardable#def_instance_delegator (method)">def_instance_delegator</a></span>, <span class='object_link'><a href="Forwardable.html#def_instance_delegators-instance_method" title="Forwardable#def_instance_delegators (method)">def_instance_delegators</a></span>, <span class='object_link'><a href="Forwardable.html#instance_delegate-instance_method" title="Forwardable#instance_delegate (method)">instance_delegate</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Enumerable.html" title="Enumerable (module)">Enumerable</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Enumerable.html#to_set-instance_method" title="Enumerable#to_set (method)">#to_set</a></span></p>
<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(data, col_sep: &quot;,&quot;, row_sep: :auto, quote_char: &#39;&quot;&#39;, field_size_limit: nil, converters: nil, unconverted_fields: nil, headers: false, return_headers: false, write_headers: nil, header_converters: nil, skip_blanks: false, force_quotes: false, skip_lines: nil, liberal_parsing: false, internal_encoding: nil, external_encoding: nil, encoding: nil)  &#x21d2; <tt><span class='object_link'><a href="" title="CSV (class)">CSV</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>This constructor will wrap either a String or IO object passed in
<code>data</code> for reading and/or writing.  In addition to the CSV
instance methods, several IO methods are delegated.  (See CSV::open() for a
complete list.)  If you pass a String for <code>data</code>, you can later
retrieve it (after writing to it, for example) with CSV.string().</p>

<p>Note that a wrapped String will be positioned at the beginning (for
reading).  If you want it at the end (for writing), use CSV::generate(). If
you want any other positioning, pass a preset StringIO object instead.</p>

<p>You may set any reading and/or writing preferences in the
<code>options</code> Hash. Available options are:</p>
<dl class="rdoc-list note-list"><dt><strong><code>:col_sep</code></strong>
<dd>
<p>The String placed between each field. This String will be transcoded into
the data&#39;s Encoding before parsing.</p>
</dd><dt><strong><code>:row_sep</code></strong>
<dd>
<p>The String appended to the end of each row.  This can be set to the special
<code>:auto</code> setting, which requests that CSV automatically discover
this from the data.  Auto-discovery reads ahead in the data looking for the
next <code>&quot;\r\n&quot;</code>, <code>&quot;\n&quot;</code>, or
<code>&quot;\r&quot;</code> sequence.  A sequence will be selected even if
it occurs in a quoted field, assuming that you would have the same line
endings there.  If none of those sequences is found, <code>data</code> is
<code>ARGF</code>, <code>STDIN</code>, <code>STDOUT</code>, or
<code>STDERR</code>, or the stream is only available for output, the
default <code>$INPUT_RECORD_SEPARATOR</code> (<code>$/</code>) is used. 
Obviously, discovery takes a little time.  Set manually if speed is
important.  Also note that IO objects should be opened in binary mode on
Windows if this feature will be used as the line-ending translation can
cause problems with resetting the document position to where it was before
the read ahead. This String will be transcoded into the data&#39;s Encoding
before parsing.</p>
</dd><dt><strong><code>:quote_char</code></strong>
<dd>
<p>The character used to quote fields. This has to be a single character
String.  This is useful for application that incorrectly use
<code>&#39;</code> as the quote character instead of the correct
<code>&quot;</code>. CSV will always consider a double sequence of this
character to be an escaped quote. This String will be transcoded into the
data&#39;s Encoding before parsing.</p>
</dd><dt><strong><code>:field_size_limit</code></strong>
<dd>
<p>This is a maximum size CSV will read ahead looking for the closing quote
for a field.  (In truth, it reads to the first line ending beyond this
size.)  If a quote cannot be found within the limit CSV will raise a
MalformedCSVError, assuming the data is faulty.  You can use this limit to
prevent what are effectively DoS attacks on the parser.  However, this
limit can cause a legitimate parse to fail and thus is set to
<code>nil</code>, or off, by default.</p>
</dd><dt><strong><code>:converters</code></strong>
<dd>
<p>An Array of names from the Converters Hash and/or lambdas that handle
custom conversion.  A single converter doesn&#39;t have to be in an Array. 
All built-in converters try to transcode fields to UTF-8 before converting.
The conversion will fail if the data cannot be transcoded, leaving the
field unchanged.</p>
</dd><dt><strong><code>:unconverted_fields</code></strong>
<dd>
<p>If set to <code>true</code>, an unconverted_fields() method will be added
to all returned rows (Array or CSV::Row) that will return the fields as
they were before conversion.  Note that <code>:headers</code> supplied by
Array or String were not fields of the document and thus will have an empty
Array attached.</p>
</dd><dt><strong><code>:headers</code></strong>
<dd>
<p>If set to <code>:first_row</code> or <code>true</code>, the initial row of
the CSV file will be treated as a row of headers.  If set to an Array, the
contents will be used as the headers. If set to a String, the String is run
through a call of CSV::parse_line() with the same <code>:col_sep</code>,
<code>:row_sep</code>, and <code>:quote_char</code> as this instance to
produce an Array of headers.  This setting causes CSV#shift() to return
rows as CSV::Row objects instead of Arrays and CSV#read() to return
CSV::Table objects instead of an Array of Arrays.</p>
</dd><dt><strong><code>:return_headers</code></strong>
<dd>
<p>When <code>false</code>, header rows are silently swallowed.  If set to
<code>true</code>, header rows are returned in a CSV::Row object with
identical headers and fields (save that the fields do not go through the
converters).</p>
</dd><dt><strong><code>:write_headers</code></strong>
<dd>
<p>When <code>true</code> and <code>:headers</code> is set, a header row will
be added to the output.</p>
</dd><dt><strong><code>:header_converters</code></strong>
<dd>
<p>Identical in functionality to <code>:converters</code> save that the
conversions are only made to header rows.  All built-in converters try to
transcode headers to UTF-8 before converting.  The conversion will fail if
the data cannot be transcoded, leaving the header unchanged.</p>
</dd><dt><strong><code>:skip_blanks</code></strong>
<dd>
<p>When set to a <code>true</code> value, CSV will skip over any empty rows.
Note that this setting will not skip rows that contain column separators,
even if the rows contain no actual data. If you want to skip rows that
contain separators but no content, consider using <code>:skip_lines</code>,
or inspecting fields.compact.empty? on each row.</p>
</dd><dt><strong><code>:force_quotes</code></strong>
<dd>
<p>When set to a <code>true</code> value, CSV will quote all CSV fields it
creates.</p>
</dd><dt><strong><code>:skip_lines</code></strong>
<dd>
<p>When set to an object responding to <code>match</code>, every line matching
it is considered a comment and ignored during parsing. When set to a
String, it is first converted to a Regexp. When set to <code>nil</code> no
line is considered a comment. If the passed object does not respond to
<code>match</code>, <code>ArgumentError</code> is thrown.</p>
</dd><dt><strong><code>:liberal_parsing</code></strong>
<dd>
<p>When set to a <code>true</code> value, CSV will attempt to parse input not
conformant with RFC 4180, such as double quotes in unquoted fields.</p>
</dd></dl>

<p>See CSV::DEFAULT_OPTIONS for the default settings.</p>

<p>Options cannot be overridden in the instance methods for performance
reasons, so be sure to set what you want here.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>ArgumentError</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1519
1520
1521
1522
1523
1524
1525
1526
1527
1528
1529
1530
1531
1532
1533
1534
1535
1536
1537
1538
1539
1540
1541
1542
1543
1544
1545
1546
1547
1548
1549
1550
1551
1552
1553
1554
1555
1556
1557
1558
1559
1560
1561
1562
1563
1564
1565
1566
1567
1568</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/csv.rb', line 1519</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'><span class='object_link'><a href="OptionParser/Arguable.html#initialize-instance_method" title="OptionParser::Arguable#initialize (method)">initialize</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='comma'>,</span> <span class='label'>col_sep:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>,</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>row_sep:</span> <span class='symbol'>:auto</span><span class='comma'>,</span> <span class='label'>quote_char:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&quot;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>field_size_limit:</span>   <span class='kw'>nil</span><span class='comma'>,</span>
               <span class='label'>converters:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>unconverted_fields:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>headers:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>return_headers:</span> <span class='kw'>false</span><span class='comma'>,</span>
               <span class='label'>write_headers:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>header_converters:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>skip_blanks:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>force_quotes:</span> <span class='kw'>false</span><span class='comma'>,</span>
               <span class='label'>skip_lines:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>liberal_parsing:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>internal_encoding:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>external_encoding:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>encoding:</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Cannot parse nil as CSV</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_data'>data</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>

  <span class='comment'># create the IO object we will read from
</span>  <span class='ivar'>@io</span> <span class='op'>=</span> <span class='id identifier rubyid_data'>data</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="String.html" title="String (class)">String</a></span></span><span class='rparen'>)</span> <span class='op'>?</span> <span class='const'><span class='object_link'><a href="StringIO.html" title="StringIO (class)">StringIO</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="StringIO.html#new-class_method" title="StringIO.new (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='rparen'>)</span> <span class='op'>:</span> <span class='id identifier rubyid_data'>data</span>
  <span class='comment'># honor the IO encoding if we can, otherwise default to ASCII-8BIT
</span>  <span class='id identifier rubyid_internal_encoding'>internal_encoding</span> <span class='op'>=</span> <span class='const'>Encoding</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span><span class='id identifier rubyid_internal_encoding'>internal_encoding</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_internal_encoding'>internal_encoding</span>
  <span class='id identifier rubyid_external_encoding'>external_encoding</span> <span class='op'>=</span> <span class='const'>Encoding</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span><span class='id identifier rubyid_external_encoding'>external_encoding</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_external_encoding'>external_encoding</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_encoding'>encoding</span>
    <span class='id identifier rubyid_encoding'>encoding</span><span class='comma'>,</span> <span class='op'>=</span> <span class='id identifier rubyid_encoding'>encoding</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>:</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>2</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_encoding'>encoding</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="String.html" title="String (class)">String</a></span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_encoding'>encoding</span> <span class='op'>=</span> <span class='const'>Encoding</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span><span class='id identifier rubyid_encoding'>encoding</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='ivar'>@encoding</span> <span class='op'>=</span> <span class='id identifier rubyid_raw_encoding'>raw_encoding</span><span class='lparen'>(</span><span class='kw'>nil</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_internal_encoding'>internal_encoding</span> <span class='op'>||</span> <span class='id identifier rubyid_encoding'>encoding</span> <span class='op'>||</span>
              <span class='const'>Encoding</span><span class='period'>.</span><span class='id identifier rubyid_default_internal'>default_internal</span> <span class='op'>||</span> <span class='const'>Encoding</span><span class='period'>.</span><span class='id identifier rubyid_default_external'>default_external</span>
  <span class='comment'>#
</span>  <span class='comment'># prepare for building safe regular expressions in the target encoding,
</span>  <span class='comment'># if we can transcode the needed characters
</span>  <span class='comment'>#
</span>  <span class='ivar'>@re_esc</span>   <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\\</span><span class='tstring_end'>&quot;</span></span><span class='period'>.</span><span class='id identifier rubyid_encode'>encode</span><span class='lparen'>(</span><span class='ivar'>@encoding</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span> <span class='kw'>rescue</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
  <span class='ivar'>@re_chars</span> <span class='op'>=</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='embexpr_beg'>#{</span><span class='tstring'><span class='tstring_beg'>%&quot;</span><span class='tstring_content'>[-\\]\\[\\.^$?*+{}()|# \r\n\t\f\v]</span><span class='tstring_end'>&quot;</span></span><span class='period'>.</span><span class='id identifier rubyid_encode'>encode</span><span class='lparen'>(</span><span class='ivar'>@encoding</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='regexp_end'>/</span></span>
  <span class='ivar'>@unconverted_fields</span> <span class='op'>=</span> <span class='id identifier rubyid_unconverted_fields'>unconverted_fields</span>

  <span class='comment'># Stores header row settings and loads header converters, if needed.
</span>  <span class='ivar'>@use_headers</span>    <span class='op'>=</span> <span class='id identifier rubyid_headers'>headers</span>
  <span class='ivar'>@return_headers</span> <span class='op'>=</span> <span class='id identifier rubyid_return_headers'>return_headers</span>
  <span class='ivar'>@write_headers</span>  <span class='op'>=</span> <span class='id identifier rubyid_write_headers'>write_headers</span>

  <span class='comment'># headers must be delayed until shift(), in case they need a row of content
</span>  <span class='ivar'>@headers</span> <span class='op'>=</span> <span class='kw'>nil</span>

  <span class='id identifier rubyid_init_separators'>init_separators</span><span class='lparen'>(</span><span class='id identifier rubyid_col_sep'>col_sep</span><span class='comma'>,</span> <span class='id identifier rubyid_row_sep'>row_sep</span><span class='comma'>,</span> <span class='id identifier rubyid_quote_char'>quote_char</span><span class='comma'>,</span> <span class='id identifier rubyid_force_quotes'>force_quotes</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_init_parsers'>init_parsers</span><span class='lparen'>(</span><span class='id identifier rubyid_skip_blanks'>skip_blanks</span><span class='comma'>,</span> <span class='id identifier rubyid_field_size_limit'>field_size_limit</span><span class='comma'>,</span> <span class='id identifier rubyid_liberal_parsing'>liberal_parsing</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_init_converters'>init_converters</span><span class='lparen'>(</span><span class='id identifier rubyid_converters'>converters</span><span class='comma'>,</span> <span class='symbol'>:@converters</span><span class='comma'>,</span> <span class='symbol'>:convert</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_init_converters'>init_converters</span><span class='lparen'>(</span><span class='id identifier rubyid_header_converters'>header_converters</span><span class='comma'>,</span> <span class='symbol'>:@header_converters</span><span class='comma'>,</span> <span class='symbol'>:header_convert</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_init_comments'>init_comments</span><span class='lparen'>(</span><span class='id identifier rubyid_skip_lines'>skip_lines</span><span class='rparen'>)</span>

  <span class='ivar'>@force_encoding</span> <span class='op'>=</span> <span class='op'>!</span><span class='op'>!</span><span class='id identifier rubyid_encoding'>encoding</span>

  <span class='comment'># track our own lineno since IO gets confused about line-ends is CSV fields
</span>  <span class='ivar'>@lineno</span> <span class='op'>=</span> <span class='int'>0</span>

  <span class='comment'># make sure headers have been assigned
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_header_row?'>header_row?</span> <span class='kw'>and</span> <span class='lbracket'>[</span><span class='const'><span class='object_link'><a href="Array.html" title="Array (class)">Array</a></span></span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="String.html" title="String (class)">String</a></span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span> <span class='ivar'>@use_headers</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span> <span class='kw'>and</span> <span class='ivar'>@write_headers</span>
    <span class='id identifier rubyid_parse_headers'>parse_headers</span>  <span class='comment'># won&#39;t read data for Array or String
</span>    <span class='kw'>self</span> <span class='op'>&lt;&lt;</span> <span class='ivar'>@headers</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <div class="method_details first">
  <h3 class="signature first" id="col_sep-instance_method">
  
    #<strong>col_sep</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The encoded <code>:col_sep</code> used in parsing and writing.  See
CSV::new for details.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1574
1575
1576</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/csv.rb', line 1574</span>

<span class='kw'>def</span> <span class='id identifier rubyid_col_sep'>col_sep</span>
  <span class='ivar'>@col_sep</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="encoding-instance_method">
  
    #<strong>encoding</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The Encoding CSV is parsing or writing in.  This will be the Encoding you
receive parsed data in and/or the Encoding data will be written in.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1647
1648
1649</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/csv.rb', line 1647</span>

<span class='kw'>def</span> <span class='id identifier rubyid_encoding'>encoding</span>
  <span class='ivar'>@encoding</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="field_size_limit-instance_method">
  
    #<strong>field_size_limit</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The limit for field size, if any.  See CSV::new for details.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1586
1587
1588</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/csv.rb', line 1586</span>

<span class='kw'>def</span> <span class='id identifier rubyid_field_size_limit'>field_size_limit</span>
  <span class='ivar'>@field_size_limit</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="line-instance_method">
  
    #<strong>line</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The line number of the last row read from this file.  Fields with nested
line-end characters will not affect this count.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1653
1654
1655</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/csv.rb', line 1653</span>

<span class='kw'>def</span> <span class='id identifier rubyid_line'>line</span>
  <span class='ivar'>@line</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="lineno-instance_method">
  
    #<strong>lineno</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The line number of the last row read from this file.  Fields with nested
line-end characters will not affect this count.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1653
1654
1655</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/csv.rb', line 1653</span>

<span class='kw'>def</span> <span class='id identifier rubyid_lineno'>lineno</span>
  <span class='ivar'>@lineno</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="quote_char-instance_method">
  
    #<strong>quote_char</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The encoded <code>:quote_char</code> used in parsing and writing.  See
CSV::new for details.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1584
1585
1586</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/csv.rb', line 1584</span>

<span class='kw'>def</span> <span class='id identifier rubyid_quote_char'>quote_char</span>
  <span class='ivar'>@quote_char</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="row_sep-instance_method">
  
    #<strong>row_sep</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The encoded <code>:row_sep</code> used in parsing and writing.  See
CSV::new for details.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1579
1580
1581</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/csv.rb', line 1579</span>

<span class='kw'>def</span> <span class='id identifier rubyid_row_sep'>row_sep</span>
  <span class='ivar'>@row_sep</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="skip_lines-instance_method">
  
    #<strong>skip_lines</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The regex marking a line as a comment. See CSV::new for details</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1589
1590
1591</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/csv.rb', line 1589</span>

<span class='kw'>def</span> <span class='id identifier rubyid_skip_lines'>skip_lines</span>
  <span class='ivar'>@skip_lines</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="filter-class_method">
  
    .<strong>filter</strong>(input = nil, output = nil, **options)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>:call-seq:</p>

<pre class="code ruby"><code class="ruby">filter( **options ) { |row| ... }
filter( input, **options ) { |row| ... }
filter( input, output, **options ) { |row| ... }</code></pre>

<p>This method is a convenience for building Unix-like filters for CSV data.
Each row is yielded to the provided block which can alter it as needed.
After the block returns, the row is appended to <code>output</code> altered
or not.</p>

<p>The <code>input</code> and <code>output</code> arguments can be anything
CSV::new() accepts (generally String or IO objects).  If not given, they
default to <code>ARGF</code> and <code>$stdout</code>.</p>

<p>The <code>options</code> parameter is also filtered down to CSV::new()
after some clever key parsing.  Any key beginning with <code>:in_</code> or
<code>:input_</code> will have that leading identifier stripped and will
only be used in the <code>options</code> Hash for the <code>input</code>
object.  Keys starting with <code>:out_</code> or <code>:output_</code>
affect only <code>output</code>.  All other keys are assigned to both
objects.</p>

<p>The <code>:output_row_sep</code> <code>option</code> defaults to
<code>$INPUT_RECORD_SEPARATOR</code> (<code>$/</code>).</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1100
1101
1102
1103
1104
1105
1106
1107
1108
1109
1110
1111
1112
1113
1114
1115
1116
1117
1118
1119
1120
1121
1122
1123</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/csv.rb', line 1100</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_filter'>filter</span><span class='lparen'>(</span><span class='id identifier rubyid_input'>input</span><span class='op'>=</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_output'>output</span><span class='op'>=</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'><span class='object_link'><a href="OptionParser/Arguable.html#options-instance_method" title="OptionParser::Arguable#options (method)">options</a></span></span><span class='rparen'>)</span>
  <span class='comment'># parse options for input, output, or both
</span>  <span class='id identifier rubyid_in_options'>in_options</span><span class='comma'>,</span> <span class='id identifier rubyid_out_options'>out_options</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Hash.html" title="Hash (class)">Hash</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="OptionParser/Arguable.html#initialize-instance_method" title="OptionParser::Arguable#initialize (method)">new</a></span></span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='label'>row_sep:</span> <span class='gvar'>$INPUT_RECORD_SEPARATOR</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_options'><span class='object_link'><a href="OptionParser/Arguable.html#options-instance_method" title="OptionParser::Arguable#options (method)">options</a></span></span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='op'>|</span>
    <span class='kw'>case</span> <span class='id identifier rubyid_key'>key</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
    <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\Ain(?:put)?_(.+)\Z</span><span class='regexp_end'>/</span></span>
      <span class='id identifier rubyid_in_options'>in_options</span><span class='lbracket'>[</span><span class='backref'>$1</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_value'>value</span>
    <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\Aout(?:put)?_(.+)\Z</span><span class='regexp_end'>/</span></span>
      <span class='id identifier rubyid_out_options'>out_options</span><span class='lbracket'>[</span><span class='backref'>$1</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_value'>value</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_in_options'>in_options</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span>  <span class='op'>=</span> <span class='id identifier rubyid_value'>value</span>
      <span class='id identifier rubyid_out_options'>out_options</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_value'>value</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='comment'># build input and output wrappers
</span>  <span class='id identifier rubyid_input'>input</span>  <span class='op'>=</span> <span class='id identifier rubyid_new'><span class='object_link'><a href="OptionParser/Arguable.html#initialize-instance_method" title="OptionParser::Arguable#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_input'>input</span>  <span class='op'>||</span> <span class='const'>ARGF</span><span class='comma'>,</span>    <span class='id identifier rubyid_in_options'>in_options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_output'>output</span> <span class='op'>=</span> <span class='id identifier rubyid_new'><span class='object_link'><a href="OptionParser/Arguable.html#initialize-instance_method" title="OptionParser::Arguable#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_output'>output</span> <span class='op'>||</span> <span class='gvar'>$stdout</span><span class='comma'>,</span> <span class='id identifier rubyid_out_options'>out_options</span><span class='rparen'>)</span>

  <span class='comment'># read, yield, write
</span>  <span class='id identifier rubyid_input'>input</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
    <span class='kw'>yield</span> <span class='id identifier rubyid_row'>row</span>
    <span class='id identifier rubyid_output'>output</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_row'>row</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="foreach-class_method">
  
    .<strong>foreach</strong>(path, **options, &amp;block)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>This method is intended as the primary interface for reading CSV files. 
You pass a <code>path</code> and any <code>options</code> you wish to set
for the read.  Each row of file will be passed to the provided
<code>block</code> in turn.</p>

<p>The <code>options</code> parameter can be anything CSV::new() understands. 
This method also understands an additional <code>:encoding</code> parameter
that you can use to specify the Encoding of the data in the file to be
read. You must provide this unless your data is in
Encoding::default_external().  CSV will use this to determine how to parse
the data.  You may provide a second Encoding to have the data transcoded as
it is read.  For example, <code>encoding: &quot;UTF-32BE:UTF-8&quot;</code>
would read UTF-32BE data from the file but transcode it to UTF-8 before CSV
parses it.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1139
1140
1141
1142
1143
1144</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/csv.rb', line 1139</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_foreach'>foreach</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'><span class='object_link'><a href="OptionParser/Arguable.html#options-instance_method" title="OptionParser::Arguable#options (method)">options</a></span></span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_to_enum'>to_enum</span><span class='lparen'>(</span><span class='id identifier rubyid___method__'>__method__</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><span class='object_link'><a href="OptionParser/Arguable.html#options-instance_method" title="OptionParser::Arguable#options (method)">options</a></span></span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_block'>block</span>
  <span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><span class='object_link'><a href="OptionParser/Arguable.html#options-instance_method" title="OptionParser::Arguable#options (method)">options</a></span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_csv'>csv</span><span class='op'>|</span>
    <span class='id identifier rubyid_csv'>csv</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="generate-class_method">
  
    .<strong>generate</strong>(str = nil, **options) {|csv| ... } &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>:call-seq:</p>

<pre class="code ruby"><code class="ruby">generate( str, **options ) { |csv| ... }
generate( **options ) { |csv| ... }</code></pre>

<p>This method wraps a String you provide, or an empty default String, in a
CSV object which is passed to the provided block.  You can use the block to
append CSV rows to the String and when the block exits, the final String
will be returned.</p>

<p>Note that a passed String <strong>is</strong> modified by this method. 
Call dup() before passing if you need a new String.</p>

<p>The <code>options</code> parameter can be anything CSV::new() understands. 
This method understands an additional <code>:encoding</code> parameter when
not passed a String to set the base Encoding for the output.  CSV needs
this hint if you plan to output non-ASCII compatible data.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt>csv</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1164
1165
1166
1167
1168
1169
1170
1171
1172
1173
1174
1175
1176
1177</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/csv.rb', line 1164</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_generate'>generate</span><span class='lparen'>(</span><span class='id identifier rubyid_str'>str</span><span class='op'>=</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'><span class='object_link'><a href="OptionParser/Arguable.html#options-instance_method" title="OptionParser::Arguable#options (method)">options</a></span></span><span class='rparen'>)</span>
  <span class='comment'># add a default empty String, if none was given
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_str'>str</span>
    <span class='id identifier rubyid_io'>io</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="StringIO.html" title="StringIO (class)">StringIO</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="StringIO.html#new-class_method" title="StringIO.new (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_str'>str</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_seek'>seek</span><span class='lparen'>(</span><span class='int'>0</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="IO.html" title="IO (class)">IO</a></span></span><span class='op'>::</span><span class='const'>SEEK_END</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_encoding'>encoding</span> <span class='op'>=</span> <span class='id identifier rubyid_options'><span class='object_link'><a href="OptionParser/Arguable.html#options-instance_method" title="OptionParser::Arguable#options (method)">options</a></span></span><span class='lbracket'>[</span><span class='symbol'>:encoding</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_str'>str</span>      <span class='op'>=</span> <span class='const'><span class='object_link'><a href="String.html" title="String (class)">String</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="OptionParser/Arguable.html#initialize-instance_method" title="OptionParser::Arguable#initialize (method)">new</a></span></span>
    <span class='id identifier rubyid_str'>str</span><span class='period'>.</span><span class='id identifier rubyid_force_encoding'>force_encoding</span><span class='lparen'>(</span><span class='id identifier rubyid_encoding'>encoding</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_encoding'>encoding</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_csv'>csv</span> <span class='op'>=</span> <span class='id identifier rubyid_new'><span class='object_link'><a href="OptionParser/Arguable.html#initialize-instance_method" title="OptionParser::Arguable#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_str'>str</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><span class='object_link'><a href="OptionParser/Arguable.html#options-instance_method" title="OptionParser::Arguable#options (method)">options</a></span></span><span class='rparen'>)</span> <span class='comment'># wrap
</span>  <span class='kw'>yield</span> <span class='id identifier rubyid_csv'>csv</span>         <span class='comment'># yield for appending
</span>  <span class='id identifier rubyid_csv'>csv</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>        <span class='comment'># return final String
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="generate_line-class_method">
  
    .<strong>generate_line</strong>(row, **options)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>This method is a shortcut for converting a single row (Array) into a CSV
String.</p>

<p>The <code>options</code> parameter can be anything CSV::new() understands. 
This method understands an additional <code>:encoding</code> parameter to
set the base Encoding for the output.  This method will try to guess your
Encoding from the first non-<code>nil</code> field in <code>row</code>, if
possible, but you may need to use this parameter as a backup plan.</p>

<p>The <code>:row_sep</code> <code>option</code> defaults to
<code>$INPUT_RECORD_SEPARATOR</code> (<code>$/</code>) when calling this
method.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1192
1193
1194
1195
1196
1197
1198
1199
1200
1201</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/csv.rb', line 1192</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_generate_line'>generate_line</span><span class='lparen'>(</span><span class='id identifier rubyid_row'>row</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'><span class='object_link'><a href="OptionParser/Arguable.html#options-instance_method" title="OptionParser::Arguable#options (method)">options</a></span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_options'><span class='object_link'><a href="OptionParser/Arguable.html#options-instance_method" title="OptionParser::Arguable#options (method)">options</a></span></span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='label'>row_sep:</span> <span class='gvar'>$INPUT_RECORD_SEPARATOR</span><span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_options'><span class='object_link'><a href="OptionParser/Arguable.html#options-instance_method" title="OptionParser::Arguable#options (method)">options</a></span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_str'>str</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="String.html" title="String (class)">String</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="OptionParser/Arguable.html#initialize-instance_method" title="OptionParser::Arguable#initialize (method)">new</a></span></span>
  <span class='kw'>if</span> <span class='id identifier rubyid_options'><span class='object_link'><a href="OptionParser/Arguable.html#options-instance_method" title="OptionParser::Arguable#options (method)">options</a></span></span><span class='lbracket'>[</span><span class='symbol'>:encoding</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_str'>str</span><span class='period'>.</span><span class='id identifier rubyid_force_encoding'>force_encoding</span><span class='lparen'>(</span><span class='id identifier rubyid_options'><span class='object_link'><a href="OptionParser/Arguable.html#options-instance_method" title="OptionParser::Arguable#options (method)">options</a></span></span><span class='lbracket'>[</span><span class='symbol'>:encoding</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_field'>field</span> <span class='op'>=</span> <span class='id identifier rubyid_row'>row</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='kw'>not</span> <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='rbrace'>}</span>
    <span class='id identifier rubyid_str'>str</span><span class='period'>.</span><span class='id identifier rubyid_force_encoding'>force_encoding</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="String.html" title="String (class)">String</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_field'>field</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_encoding'>encoding</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='lparen'>(</span><span class='id identifier rubyid_new'><span class='object_link'><a href="OptionParser/Arguable.html#initialize-instance_method" title="OptionParser::Arguable#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_str'>str</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><span class='object_link'><a href="OptionParser/Arguable.html#options-instance_method" title="OptionParser::Arguable#options (method)">options</a></span></span><span class='rparen'>)</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_row'>row</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="instance-class_method">
  
    .<strong>instance</strong>(data = $stdout, **options)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>This method will return a CSV instance, just like CSV::new(), but the
instance will be cached and returned for all future calls to this method
for the same <code>data</code> object (tested by Object#object_id()) with
the same <code>options</code>.</p>

<p>If a block is given, the instance is passed to the block and the return
value becomes the return value of the block.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1060
1061
1062
1063
1064
1065
1066
1067
1068
1069
1070
1071
1072
1073
1074</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/csv.rb', line 1060</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_instance'>instance</span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='gvar'>$stdout</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'><span class='object_link'><a href="OptionParser/Arguable.html#options-instance_method" title="OptionParser::Arguable#options (method)">options</a></span></span><span class='rparen'>)</span>
  <span class='comment'># create a _signature_ for this method call, data object and options
</span>  <span class='id identifier rubyid_sig'>sig</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_data'>data</span><span class='period'>.</span><span class='id identifier rubyid_object_id'>object_id</span><span class='rbracket'>]</span> <span class='op'>+</span>
        <span class='id identifier rubyid_options'><span class='object_link'><a href="OptionParser/Arguable.html#options-instance_method" title="OptionParser::Arguable#options (method)">options</a></span></span><span class='period'>.</span><span class='id identifier rubyid_values_at'>values_at</span><span class='lparen'>(</span><span class='op'>*</span><span class='const'><span class='object_link'><a href="#DEFAULT_OPTIONS-constant" title="CSV::DEFAULT_OPTIONS (constant)">DEFAULT_OPTIONS</a></span></span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_sort_by'>sort_by</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_sym'>sym</span><span class='op'>|</span> <span class='id identifier rubyid_sym'>sym</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='rbrace'>}</span><span class='rparen'>)</span>

  <span class='comment'># fetch or create the instance for this signature
</span>  <span class='cvar'>@@instances</span> <span class='op'>||=</span> <span class='const'><span class='object_link'><a href="Hash.html" title="Hash (class)">Hash</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="OptionParser/Arguable.html#initialize-instance_method" title="OptionParser::Arguable#initialize (method)">new</a></span></span>
  <span class='id identifier rubyid_instance'>instance</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='cvar'>@@instances</span><span class='lbracket'>[</span><span class='id identifier rubyid_sig'>sig</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='id identifier rubyid_new'><span class='object_link'><a href="OptionParser/Arguable.html#initialize-instance_method" title="OptionParser::Arguable#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><span class='object_link'><a href="OptionParser/Arguable.html#options-instance_method" title="OptionParser::Arguable#options (method)">options</a></span></span><span class='rparen'>)</span><span class='rparen'>)</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
    <span class='kw'>yield</span> <span class='id identifier rubyid_instance'>instance</span>  <span class='comment'># run block, if given, returning result
</span>  <span class='kw'>else</span>
    <span class='id identifier rubyid_instance'>instance</span>        <span class='comment'># or return the instance
</span>  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="open-class_method">
  
    .<strong>open</strong>(filename, mode = &quot;r&quot;, **options)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>:call-seq:</p>

<pre class="code ruby"><code class="ruby">open( filename, mode = &quot;rb&quot;, **options ) { |faster_csv| ... }
open( filename, **options ) { |faster_csv| ... }
open( filename, mode = &quot;rb&quot;, **options )
open( filename, **options )</code></pre>

<p>This method opens an IO object, and wraps that with CSV.  This is intended
as the primary interface for writing a CSV file.</p>

<p>You must pass a <code>filename</code> and may optionally add a
<code>mode</code> for Ruby&#39;s open().  You may also pass an optional
Hash containing any <code>options</code> CSV::new() understands as the
final argument.</p>

<p>This method works like Ruby&#39;s open() call, in that it will pass a CSV
object to a provided block and close it when the block terminates, or it
will return the CSV object when no block is provided. 
(<strong>Note</strong>: This is different from the Ruby 1.8 CSV library
which passed rows to the block.  Use CSV::foreach() for that behavior.)</p>

<p>You must provide a <code>mode</code> with an embedded Encoding designator
unless your data is in Encoding::default_external().  CSV will check the
Encoding of the underlying IO object (set by the <code>mode</code> you
pass) to determine how to parse the data.   You may provide a second
Encoding to have the data transcoded as it is read just as you can with a
normal call to IO::open().  For example,
<code>&quot;rb:UTF-32BE:UTF-8&quot;</code> would read UTF-32BE data from
the file but transcode it to UTF-8 before CSV parses it.</p>

<p>An opened CSV object will delegate to many IO methods for convenience.  You
may call:</p>
<ul><li>
<p>binmode()</p>
</li><li>
<p>binmode?()</p>
</li><li>
<p>close()</p>
</li><li>
<p>close_read()</p>
</li><li>
<p>close_write()</p>
</li><li>
<p>closed?()</p>
</li><li>
<p>eof()</p>
</li><li>
<p>eof?()</p>
</li><li>
<p>external_encoding()</p>
</li><li>
<p>fcntl()</p>
</li><li>
<p>fileno()</p>
</li><li>
<p>flock()</p>
</li><li>
<p>flush()</p>
</li><li>
<p>fsync()</p>
</li><li>
<p>internal_encoding()</p>
</li><li>
<p>ioctl()</p>
</li><li>
<p>isatty()</p>
</li><li>
<p>path()</p>
</li><li>
<p>pid()</p>
</li><li>
<p>pos()</p>
</li><li>
<p>pos=()</p>
</li><li>
<p>reopen()</p>
</li><li>
<p>seek()</p>
</li><li>
<p>stat()</p>
</li><li>
<p>sync()</p>
</li><li>
<p>sync=()</p>
</li><li>
<p>tell()</p>
</li><li>
<p>to_i()</p>
</li><li>
<p>to_io()</p>
</li><li>
<p>truncate()</p>
</li><li>
<p>tty?()</p>
</li></ul>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1266
1267
1268
1269
1270
1271
1272
1273
1274
1275
1276
1277
1278
1279
1280
1281
1282
1283
1284
1285
1286
1287
1288
1289
1290
1291
1292
1293
1294
1295
1296</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/csv.rb', line 1266</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='id identifier rubyid_filename'>filename</span><span class='comma'>,</span> <span class='id identifier rubyid_mode'>mode</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>r</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'><span class='object_link'><a href="OptionParser/Arguable.html#options-instance_method" title="OptionParser::Arguable#options (method)">options</a></span></span><span class='rparen'>)</span>
  <span class='comment'># wrap a File opened with the remaining +args+ with no newline
</span>  <span class='comment'># decorator
</span>  <span class='id identifier rubyid_file_opts'>file_opts</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='label'>universal_newline:</span> <span class='kw'>false</span><span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_options'><span class='object_link'><a href="OptionParser/Arguable.html#options-instance_method" title="OptionParser::Arguable#options (method)">options</a></span></span><span class='rparen'>)</span>

  <span class='kw'>begin</span>
    <span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="File.html" title="File (class)">File</a></span></span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='id identifier rubyid_filename'>filename</span><span class='comma'>,</span> <span class='id identifier rubyid_mode'>mode</span><span class='comma'>,</span> <span class='id identifier rubyid_file_opts'>file_opts</span><span class='rparen'>)</span>
  <span class='kw'>rescue</span> <span class='const'>ArgumentError</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='kw'>unless</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>needs binmode</span><span class='regexp_end'>/</span></span> <span class='op'>=~</span> <span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span> <span class='kw'>and</span> <span class='id identifier rubyid_mode'>mode</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>r</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_mode'>mode</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>rb</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_file_opts'>file_opts</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='label'>encoding:</span> <span class='const'>Encoding</span><span class='period'>.</span><span class='id identifier rubyid_default_external'>default_external</span><span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_file_opts'>file_opts</span><span class='rparen'>)</span>
    <span class='kw'>retry</span>
  <span class='kw'>end</span>
  <span class='kw'>begin</span>
    <span class='id identifier rubyid_csv'>csv</span> <span class='op'>=</span> <span class='id identifier rubyid_new'><span class='object_link'><a href="OptionParser/Arguable.html#initialize-instance_method" title="OptionParser::Arguable#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_f'>f</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><span class='object_link'><a href="OptionParser/Arguable.html#options-instance_method" title="OptionParser::Arguable#options (method)">options</a></span></span><span class='rparen'>)</span>
  <span class='kw'>rescue</span> <span class='const'>Exception</span>
    <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_close'>close</span>
    <span class='id identifier rubyid_raise'>raise</span>
  <span class='kw'>end</span>

  <span class='comment'># handle blocks like Ruby&#39;s open(), not like the CSV library
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
    <span class='kw'>begin</span>
      <span class='kw'>yield</span> <span class='id identifier rubyid_csv'>csv</span>
    <span class='kw'>ensure</span>
      <span class='id identifier rubyid_csv'>csv</span><span class='period'>.</span><span class='id identifier rubyid_close'>close</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_csv'>csv</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="parse-class_method">
  
    .<strong>parse</strong>(*args, &amp;block)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>:call-seq:</p>

<pre class="code ruby"><code class="ruby">parse( str, **options ) { |row| ... }
parse( str, **options )</code></pre>

<p>This method can be used to easily parse CSV out of a String.  You may
either provide a <code>block</code> which will be called with each row of
the String in turn, or just use the returned Array of Arrays (when no
<code>block</code> is given).</p>

<p>You pass your <code>str</code> to read from, and an optional
<code>options</code> containing anything CSV::new() understands.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1310
1311
1312
1313
1314
1315
1316
1317
1318
1319
1320
1321</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/csv.rb', line 1310</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_csv'>csv</span> <span class='op'>=</span> <span class='id identifier rubyid_new'><span class='object_link'><a href="OptionParser/Arguable.html#initialize-instance_method" title="OptionParser::Arguable#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_block'>block</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>  <span class='comment'># slurp contents, if no block is given
</span>    <span class='kw'>begin</span>
      <span class='id identifier rubyid_csv'>csv</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span>
    <span class='kw'>ensure</span>
      <span class='id identifier rubyid_csv'>csv</span><span class='period'>.</span><span class='id identifier rubyid_close'>close</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>           <span class='comment'># or pass each row to a provided block
</span>    <span class='id identifier rubyid_csv'>csv</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="parse_line-class_method">
  
    .<strong>parse_line</strong>(line, **options)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>This method is a shortcut for converting a single line of a CSV String into
an Array.  Note that if <code>line</code> contains multiple rows, anything
beyond the first row is ignored.</p>

<p>The <code>options</code> parameter can be anything CSV::new() understands.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1330
1331
1332</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/csv.rb', line 1330</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_parse_line'>parse_line</span><span class='lparen'>(</span><span class='id identifier rubyid_line'>line</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'><span class='object_link'><a href="OptionParser/Arguable.html#options-instance_method" title="OptionParser::Arguable#options (method)">options</a></span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_new'><span class='object_link'><a href="OptionParser/Arguable.html#initialize-instance_method" title="OptionParser::Arguable#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_line'>line</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><span class='object_link'><a href="OptionParser/Arguable.html#options-instance_method" title="OptionParser::Arguable#options (method)">options</a></span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_shift'>shift</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="read-class_method">
  
    .<strong>read</strong>(path, *options)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Use to slurp a CSV file into an Array of Arrays.  Pass the
<code>path</code> to the file and any <code>options</code> CSV::new()
understands.  This method also understands an additional
<code>:encoding</code> parameter that you can use to specify the Encoding
of the data in the file to be read. You must provide this unless your data
is in Encoding::default_external().  CSV will use this to determine how to
parse the data.  You may provide a second Encoding to have the data
transcoded as it is read.  For example, <code>encoding:
&quot;UTF-32BE:UTF-8&quot;</code> would read UTF-32BE data from the file
but transcode it to UTF-8 before CSV parses it.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1345
1346
1347</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/csv.rb', line 1345</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_options'><span class='object_link'><a href="OptionParser/Arguable.html#options-instance_method" title="OptionParser::Arguable#options (method)">options</a></span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_options'><span class='object_link'><a href="OptionParser/Arguable.html#options-instance_method" title="OptionParser::Arguable#options (method)">options</a></span></span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_csv'>csv</span><span class='op'>|</span> <span class='id identifier rubyid_csv'>csv</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="readlines-class_method">
  
    .<strong>readlines</strong>(*args)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Alias for CSV::read().</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1350
1351
1352</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/csv.rb', line 1350</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_readlines'>readlines</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="table-class_method">
  
    .<strong>table</strong>(path, **options)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>A shortcut for:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><span class='object_link'><a href="" title="CSV (class)">CSV</a></span></span><span class='period'>.</span><span class='id identifier rubyid_read'><span class='object_link'><a href="#read-class_method" title="CSV.read (method)">read</a></span></span><span class='lparen'>(</span> <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='lbrace'>{</span> <span class='label'>headers:</span>           <span class='kw'>true</span><span class='comma'>,</span>
                  <span class='label'>converters:</span>        <span class='symbol'>:numeric</span><span class='comma'>,</span>
                  <span class='label'>header_converters:</span> <span class='symbol'>:symbol</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_options'><span class='object_link'><a href="OptionParser/Arguable.html#options-instance_method" title="OptionParser::Arguable#options (method)">options</a></span></span><span class='rparen'>)</span> <span class='rparen'>)</span>
</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1361
1362
1363
1364
1365</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/csv.rb', line 1361</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_table'>table</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'><span class='object_link'><a href="OptionParser/Arguable.html#options-instance_method" title="OptionParser::Arguable#options (method)">options</a></span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span> <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='lbrace'>{</span> <span class='label'>headers:</span>           <span class='kw'>true</span><span class='comma'>,</span>
                <span class='label'>converters:</span>        <span class='symbol'>:numeric</span><span class='comma'>,</span>
                <span class='label'>header_converters:</span> <span class='symbol'>:symbol</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_options'><span class='object_link'><a href="OptionParser/Arguable.html#options-instance_method" title="OptionParser::Arguable#options (method)">options</a></span></span><span class='rparen'>)</span> <span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="<<-instance_method">
  
    #<strong>&lt;&lt;</strong>(row)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='add_row-instance_method'>add_row</span>, <span id='puts-instance_method'>puts</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The primary write method for wrapped Strings and IOs, <code>row</code> (an
Array or CSV::Row) is converted to CSV and appended to the data source. 
When a CSV::Row is passed, only the row&#39;s fields() are appended to the
output.</p>

<p>The data source must be open for writing.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1682
1683
1684
1685
1686
1687
1688
1689
1690
1691
1692
1693
1694
1695
1696
1697
1698
1699
1700
1701
1702
1703
1704
1705
1706
1707
1708
1709
1710
1711</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/csv.rb', line 1682</span>

<span class='kw'>def</span> <span class='op'>&lt;&lt;</span><span class='lparen'>(</span><span class='id identifier rubyid_row'>row</span><span class='rparen'>)</span>
  <span class='comment'># make sure headers have been assigned
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_header_row?'>header_row?</span> <span class='kw'>and</span> <span class='lbracket'>[</span><span class='const'><span class='object_link'><a href="Array.html" title="Array (class)">Array</a></span></span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="String.html" title="String (class)">String</a></span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span> <span class='ivar'>@use_headers</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span> <span class='kw'>and</span> <span class='op'>!</span><span class='ivar'>@write_headers</span>
    <span class='id identifier rubyid_parse_headers'>parse_headers</span>  <span class='comment'># won&#39;t read data for Array or String
</span>  <span class='kw'>end</span>

  <span class='comment'># handle CSV::Row objects and Hashes
</span>  <span class='id identifier rubyid_row'>row</span> <span class='op'>=</span> <span class='kw'>case</span> <span class='id identifier rubyid_row'>row</span>
        <span class='kw'>when</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='op'>::</span><span class='const'>Row</span> <span class='kw'>then</span> <span class='id identifier rubyid_row'>row</span><span class='period'>.</span><span class='id identifier rubyid_fields'>fields</span>
        <span class='kw'>when</span> <span class='const'><span class='object_link'><a href="Hash.html" title="Hash (class)">Hash</a></span></span>            <span class='kw'>then</span> <span class='ivar'>@headers</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_header'>header</span><span class='op'>|</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='id identifier rubyid_header'>header</span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
        <span class='kw'>else</span>                      <span class='id identifier rubyid_row'>row</span>
        <span class='kw'>end</span>

  <span class='ivar'>@headers</span> <span class='op'>=</span>  <span class='id identifier rubyid_row'>row</span> <span class='kw'>if</span> <span class='id identifier rubyid_header_row?'>header_row?</span>
  <span class='ivar'>@lineno</span>  <span class='op'>+=</span> <span class='int'>1</span>

  <span class='id identifier rubyid_output'>output</span> <span class='op'>=</span> <span class='id identifier rubyid_row'>row</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='ivar'>@quote</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='ivar'>@col_sep</span><span class='rparen'>)</span> <span class='op'>+</span> <span class='ivar'>@row_sep</span>  <span class='comment'># quote and separate
</span>  <span class='kw'>if</span> <span class='ivar'>@io</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="StringIO.html" title="StringIO (class)">StringIO</a></span></span><span class='rparen'>)</span>             <span class='kw'>and</span>
     <span class='id identifier rubyid_output'>output</span><span class='period'>.</span><span class='id identifier rubyid_encoding'>encoding</span> <span class='op'>!=</span> <span class='lparen'>(</span><span class='id identifier rubyid_encoding'>encoding</span> <span class='op'>=</span> <span class='id identifier rubyid_raw_encoding'>raw_encoding</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='ivar'>@force_encoding</span>
      <span class='id identifier rubyid_output'>output</span> <span class='op'>=</span> <span class='id identifier rubyid_output'>output</span><span class='period'>.</span><span class='id identifier rubyid_encode'>encode</span><span class='lparen'>(</span><span class='id identifier rubyid_encoding'>encoding</span><span class='rparen'>)</span>
    <span class='kw'>elsif</span> <span class='lparen'>(</span><span class='id identifier rubyid_compatible_encoding'>compatible_encoding</span> <span class='op'>=</span> <span class='const'>Encoding</span><span class='period'>.</span><span class='id identifier rubyid_compatible?'>compatible?</span><span class='lparen'>(</span><span class='ivar'>@io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='id identifier rubyid_output'>output</span><span class='rparen'>)</span><span class='rparen'>)</span>
      <span class='ivar'>@io</span><span class='period'>.</span><span class='id identifier rubyid_set_encoding'>set_encoding</span><span class='lparen'>(</span><span class='id identifier rubyid_compatible_encoding'>compatible_encoding</span><span class='rparen'>)</span>
      <span class='ivar'>@io</span><span class='period'>.</span><span class='id identifier rubyid_seek'>seek</span><span class='lparen'>(</span><span class='int'>0</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="IO.html" title="IO (class)">IO</a></span></span><span class='op'>::</span><span class='const'>SEEK_END</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='ivar'>@io</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_output'>output</span>

  <span class='kw'>self</span>  <span class='comment'># for chaining
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="convert-instance_method">
  
    #<strong>convert</strong>(name = nil, &amp;converter)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>:call-seq:</p>

<pre class="code ruby"><code class="ruby">convert( name )
convert { |field| ... }
convert { |field, field_info| ... }</code></pre>

<p>You can use this method to install a CSV::Converters built-in, or provide a
block that handles a custom conversion.</p>

<p>If you provide a block that takes one argument, it will be passed the field
and is expected to return the converted value or the field itself.  If your
block takes two arguments, it will also be passed a CSV::FieldInfo Struct,
containing details about the field.  Again, the block should return a
converted field or the field itself.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1730
1731
1732</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/csv.rb', line 1730</span>

<span class='kw'>def</span> <span class='id identifier rubyid_convert'>convert</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_converter'>converter</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_add_converter'>add_converter</span><span class='lparen'>(</span><span class='symbol'>:@converters</span><span class='comma'>,</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='op'>::</span><span class='const'>Converters</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_converter'>converter</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="converters-instance_method">
  
    #<strong>converters</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the current list of converters in effect.  See CSV::new for
details. Built-in converters will be returned by name, while others will be
returned as is.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1596
1597
1598
1599
1600
1601</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/csv.rb', line 1596</span>

<span class='kw'>def</span> <span class='id identifier rubyid_converters'>converters</span>
  <span class='ivar'>@converters</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_converter'>converter</span><span class='op'>|</span>
    <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="#Converters-constant" title="CSV::Converters (constant)">Converters</a></span></span><span class='period'>.</span><span class='id identifier rubyid_rassoc'>rassoc</span><span class='lparen'>(</span><span class='id identifier rubyid_converter'>converter</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_name'>name</span> <span class='op'>?</span> <span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span> <span class='op'>:</span> <span class='id identifier rubyid_converter'>converter</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="each-instance_method">
  
    #<strong>each</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Yields each row of the data source in turn.</p>

<p>Support for Enumerable.</p>

<p>The data source must be open for reading.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1761
1762
1763
1764
1765
1766
1767
1768
1769</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/csv.rb', line 1761</span>

<span class='kw'>def</span> <span class='id identifier rubyid_each'>each</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
    <span class='kw'>while</span> <span class='id identifier rubyid_row'>row</span> <span class='op'>=</span> <span class='id identifier rubyid_shift'>shift</span>
      <span class='kw'>yield</span> <span class='id identifier rubyid_row'>row</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_to_enum'>to_enum</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="force_quotes?-instance_method">
  
    #<strong>force_quotes?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns <code>true</code> if all output fields are quoted. See CSV::new for
details.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1639</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/csv.rb', line 1639</span>

<span class='kw'>def</span> <span class='id identifier rubyid_force_quotes?'>force_quotes?</span><span class='lparen'>(</span><span class='rparen'>)</span>       <span class='ivar'>@force_quotes</span>       <span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="header_convert-instance_method">
  
    #<strong>header_convert</strong>(name = nil, &amp;converter)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>:call-seq:</p>

<pre class="code ruby"><code class="ruby">header_convert( name )
header_convert { |field| ... }
header_convert { |field, field_info| ... }</code></pre>

<p>Identical to CSV#convert(), but for header rows.</p>

<p>Note that this method must be called before header rows are read to have
any effect.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1745
1746
1747
1748
1749
1750</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/csv.rb', line 1745</span>

<span class='kw'>def</span> <span class='id identifier rubyid_header_convert'>header_convert</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_converter'>converter</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_add_converter'>add_converter</span><span class='lparen'>(</span> <span class='symbol'>:@header_converters</span><span class='comma'>,</span>
                 <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='op'>::</span><span class='const'>HeaderConverters</span><span class='comma'>,</span>
                 <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span>
                 <span class='op'>&amp;</span><span class='id identifier rubyid_converter'>converter</span> <span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="header_converters-instance_method">
  
    #<strong>header_converters</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the current list of converters in effect for headers.  See CSV::new
for details.  Built-in converters will be returned by name, while others
will be returned as is.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1627
1628
1629
1630
1631
1632</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/csv.rb', line 1627</span>

<span class='kw'>def</span> <span class='id identifier rubyid_header_converters'>header_converters</span>
  <span class='ivar'>@header_converters</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_converter'>converter</span><span class='op'>|</span>
    <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="#HeaderConverters-constant" title="CSV::HeaderConverters (constant)">HeaderConverters</a></span></span><span class='period'>.</span><span class='id identifier rubyid_rassoc'>rassoc</span><span class='lparen'>(</span><span class='id identifier rubyid_converter'>converter</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_name'>name</span> <span class='op'>?</span> <span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span> <span class='op'>:</span> <span class='id identifier rubyid_converter'>converter</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="header_row?-instance_method">
  
    #<strong>header_row?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns <code>true</code> if the next row read will be a header row.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1787
1788
1789</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/csv.rb', line 1787</span>

<span class='kw'>def</span> <span class='id identifier rubyid_header_row?'>header_row?</span>
  <span class='ivar'>@use_headers</span> <span class='kw'>and</span> <span class='ivar'>@headers</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="headers-instance_method">
  
    #<strong>headers</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns <code>nil</code> if headers will not be used, <code>true</code> if
they will but have not yet been read, or the actual headers after they have
been read.  See CSV::new for details.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1612
1613
1614</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/csv.rb', line 1612</span>

<span class='kw'>def</span> <span class='id identifier rubyid_headers'>headers</span>
  <span class='ivar'>@headers</span> <span class='op'>||</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='ivar'>@use_headers</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="inspect-instance_method">
  
    #<strong>inspect</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns a simplified description of the key CSV attributes in an ASCII
compatible String.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1961
1962
1963
1964
1965
1966
1967
1968
1969
1970
1971
1972
1973
1974
1975
1976
1977
1978
1979
1980
1981
1982
1983
1984
1985
1986
1987
1988
1989
1990
1991
1992
1993
1994</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/csv.rb', line 1961</span>

<span class='kw'>def</span> <span class='id identifier rubyid_inspect'>inspect</span>
  <span class='id identifier rubyid_str'>str</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;#</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> io_type:</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
  <span class='comment'># show type of wrapped IO
</span>  <span class='kw'>if</span>    <span class='ivar'>@io</span> <span class='op'>==</span> <span class='gvar'>$stdout</span> <span class='kw'>then</span> <span class='id identifier rubyid_str'>str</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$stdout</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>elsif</span> <span class='ivar'>@io</span> <span class='op'>==</span> <span class='gvar'>$stdin</span>  <span class='kw'>then</span> <span class='id identifier rubyid_str'>str</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$stdin</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>elsif</span> <span class='ivar'>@io</span> <span class='op'>==</span> <span class='gvar'>$stderr</span> <span class='kw'>then</span> <span class='id identifier rubyid_str'>str</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$stderr</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>else</span>                      <span class='id identifier rubyid_str'>str</span> <span class='op'>&lt;&lt;</span> <span class='ivar'>@io</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
  <span class='kw'>end</span>
  <span class='comment'># show IO.path(), if available
</span>  <span class='kw'>if</span> <span class='ivar'>@io</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:path</span><span class='rparen'>)</span> <span class='kw'>and</span> <span class='lparen'>(</span><span class='id identifier rubyid_p'>p</span> <span class='op'>=</span> <span class='ivar'>@io</span><span class='period'>.</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_str'>str</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> io_path:</span><span class='tstring_end'>&quot;</span></span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_p'>p</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span>
  <span class='kw'>end</span>
  <span class='comment'># show encoding
</span>  <span class='id identifier rubyid_str'>str</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> encoding:</span><span class='tstring_end'>&quot;</span></span> <span class='op'>&lt;&lt;</span> <span class='ivar'>@encoding</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span>
  <span class='comment'># show other attributes
</span>  <span class='qwords_beg'>%w[ </span><span class='tstring_content'>lineno</span><span class='words_sep'>     </span><span class='tstring_content'>col_sep</span><span class='words_sep'>     </span><span class='tstring_content'>row_sep</span><span class='words_sep'>
</span><span class='tstring_content'>      quote_char</span><span class='words_sep'> </span><span class='tstring_content'>skip_blanks</span><span class='words_sep'> </span><span class='tstring_content'>liberal_parsing</span><span class='words_sep'> ]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_attr_name'>attr_name</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_a'>a</span> <span class='op'>=</span> <span class='id identifier rubyid_instance_variable_get'>instance_variable_get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>@</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_attr_name'>attr_name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='id identifier rubyid_str'>str</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_attr_name'>attr_name</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>:</span><span class='tstring_end'>&quot;</span></span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_a'>a</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='ivar'>@use_headers</span>
    <span class='id identifier rubyid_str'>str</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> headers:</span><span class='tstring_end'>&quot;</span></span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_headers'>headers</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_str'>str</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&gt;</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>begin</span>
    <span class='id identifier rubyid_str'>str</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>rescue</span>  <span class='comment'># any encoding error
</span>    <span class='id identifier rubyid_str'>str</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_s'>s</span><span class='op'>|</span>
      <span class='id identifier rubyid_e'>e</span> <span class='op'>=</span> <span class='const'>Encoding</span><span class='op'>::</span><span class='const'>Converter</span><span class='period'>.</span><span class='id identifier rubyid_asciicompat_encoding'>asciicompat_encoding</span><span class='lparen'>(</span><span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_encoding'>encoding</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_e'>e</span> <span class='op'>?</span> <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_encode'>encode</span><span class='lparen'>(</span><span class='id identifier rubyid_e'>e</span><span class='rparen'>)</span> <span class='op'>:</span> <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_force_encoding'>force_encoding</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ASCII-8BIT</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="liberal_parsing?-instance_method">
  
    #<strong>liberal_parsing?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns <code>true</code> if illegal input is handled. See CSV::new for
details.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1641</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/csv.rb', line 1641</span>

<span class='kw'>def</span> <span class='id identifier rubyid_liberal_parsing?'>liberal_parsing?</span><span class='lparen'>(</span><span class='rparen'>)</span>    <span class='ivar'>@liberal_parsing</span>    <span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="read-instance_method">
  
    #<strong>read</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='readlines-instance_method'>readlines</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Slurps the remaining rows and returns an Array of Arrays.</p>

<p>The data source must be open for reading.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1776
1777
1778
1779
1780
1781
1782
1783</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/csv.rb', line 1776</span>

<span class='kw'>def</span> <span class='id identifier rubyid_read'>read</span>
  <span class='id identifier rubyid_rows'>rows</span> <span class='op'>=</span> <span class='id identifier rubyid_to_a'>to_a</span>
  <span class='kw'>if</span> <span class='ivar'>@use_headers</span>
    <span class='const'><span class='object_link'><a href="CSV/Table.html" title="CSV::Table (class)">Table</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="CSV/Table.html#initialize-instance_method" title="CSV::Table#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_rows'>rows</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_rows'>rows</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="return_headers?-instance_method">
  
    #<strong>return_headers?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns <code>true</code> if headers will be returned as a row of results.
See CSV::new for details.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1619</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/csv.rb', line 1619</span>

<span class='kw'>def</span> <span class='id identifier rubyid_return_headers?'>return_headers?</span><span class='lparen'>(</span><span class='rparen'>)</span>     <span class='ivar'>@return_headers</span>     <span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="rewind-instance_method">
  
    #<strong>rewind</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Rewinds the underlying IO object and resets CSV&#39;s lineno() counter.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1666
1667
1668
1669
1670
1671</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/csv.rb', line 1666</span>

<span class='kw'>def</span> <span class='id identifier rubyid_rewind'>rewind</span>
  <span class='ivar'>@headers</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@lineno</span>  <span class='op'>=</span> <span class='int'>0</span>

  <span class='ivar'>@io</span><span class='period'>.</span><span class='id identifier rubyid_rewind'>rewind</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="shift-instance_method">
  
    #<strong>shift</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='gets-instance_method'>gets</span>, <span id='readline-instance_method'>readline</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The primary read method for wrapped Strings and IOs, a single row is pulled
from the data source, parsed and returned as an Array of fields (if header
rows are not used) or a CSV::Row (when header rows are used).</p>

<p>The data source must be open for reading.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1798
1799
1800
1801
1802
1803
1804
1805
1806
1807
1808
1809
1810
1811
1812
1813
1814
1815
1816
1817
1818
1819
1820
1821
1822
1823
1824
1825
1826
1827
1828
1829
1830
1831
1832
1833
1834
1835
1836
1837
1838
1839
1840
1841
1842
1843
1844
1845
1846
1847
1848
1849
1850
1851
1852
1853
1854
1855
1856
1857
1858
1859
1860
1861
1862
1863
1864
1865
1866
1867
1868
1869
1870
1871
1872
1873
1874
1875
1876
1877
1878
1879
1880
1881
1882
1883
1884
1885
1886
1887
1888
1889
1890
1891
1892
1893
1894
1895
1896
1897
1898
1899
1900
1901
1902
1903
1904
1905
1906
1907
1908
1909
1910
1911
1912
1913
1914
1915
1916
1917
1918
1919
1920
1921
1922
1923
1924
1925
1926
1927
1928
1929
1930
1931
1932
1933
1934
1935
1936
1937
1938
1939
1940
1941
1942
1943
1944
1945
1946
1947
1948
1949
1950
1951
1952
1953</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/csv.rb', line 1798</span>

<span class='kw'>def</span> <span class='id identifier rubyid_shift'>shift</span>
  <span class='comment'>#########################################################################
</span>  <span class='comment'>### This method is purposefully kept a bit long as simple conditional ###
</span>  <span class='comment'>### checks are faster than numerous (expensive) method calls.         ###
</span>  <span class='comment'>#########################################################################
</span>
  <span class='comment'># handle headers not based on document content
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_header_row?'>header_row?</span> <span class='kw'>and</span> <span class='ivar'>@return_headers</span> <span class='kw'>and</span>
     <span class='lbracket'>[</span><span class='const'><span class='object_link'><a href="Array.html" title="Array (class)">Array</a></span></span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="String.html" title="String (class)">String</a></span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span> <span class='ivar'>@use_headers</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span>
    <span class='kw'>if</span> <span class='ivar'>@unconverted_fields</span>
      <span class='kw'>return</span> <span class='id identifier rubyid_add_unconverted_fields'>add_unconverted_fields</span><span class='lparen'>(</span><span class='id identifier rubyid_parse_headers'>parse_headers</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="Array.html" title="Array (class)">Array</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="OptionParser/Arguable.html#initialize-instance_method" title="OptionParser::Arguable#initialize (method)">new</a></span></span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='kw'>return</span> <span class='id identifier rubyid_parse_headers'>parse_headers</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='comment'>#
</span>  <span class='comment'># it can take multiple calls to &lt;tt&gt;@io.gets()&lt;/tt&gt; to get a full line,
</span>  <span class='comment'># because of \r and/or \n characters embedded in quoted fields
</span>  <span class='comment'>#
</span>  <span class='id identifier rubyid_in_extended_col'>in_extended_col</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='id identifier rubyid_csv'>csv</span>             <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Array.html" title="Array (class)">Array</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="OptionParser/Arguable.html#initialize-instance_method" title="OptionParser::Arguable#initialize (method)">new</a></span></span>

  <span class='id identifier rubyid_loop'>loop</span> <span class='kw'>do</span>
    <span class='comment'># add another read to the line
</span>    <span class='kw'>unless</span> <span class='id identifier rubyid_parse'>parse</span> <span class='op'>=</span> <span class='ivar'>@io</span><span class='period'>.</span><span class='id identifier rubyid_gets'>gets</span><span class='lparen'>(</span><span class='ivar'>@row_sep</span><span class='rparen'>)</span>
      <span class='kw'>return</span> <span class='kw'>nil</span>
    <span class='kw'>end</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_in_extended_col'>in_extended_col</span>
      <span class='ivar'>@line</span><span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span><span class='lparen'>(</span><span class='id identifier rubyid_parse'>parse</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='ivar'>@line</span> <span class='op'>=</span> <span class='id identifier rubyid_parse'>parse</span><span class='period'>.</span><span class='id identifier rubyid_clone'>clone</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_parse'>parse</span><span class='period'>.</span><span class='id identifier rubyid_sub!'>sub!</span><span class='lparen'>(</span><span class='ivar'>@parsers</span><span class='lbracket'>[</span><span class='symbol'>:line_end</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_csv'>csv</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
      <span class='comment'>#
</span>      <span class='comment'># I believe a blank line should be an &lt;tt&gt;Array.new&lt;/tt&gt;, not Ruby 1.8
</span>      <span class='comment'># CSV&#39;s &lt;tt&gt;[nil]&lt;/tt&gt;
</span>      <span class='comment'>#
</span>      <span class='kw'>if</span> <span class='id identifier rubyid_parse'>parse</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
        <span class='ivar'>@lineno</span> <span class='op'>+=</span> <span class='int'>1</span>
        <span class='kw'>if</span> <span class='ivar'>@skip_blanks</span>
          <span class='kw'>next</span>
        <span class='kw'>elsif</span> <span class='ivar'>@unconverted_fields</span>
          <span class='kw'>return</span> <span class='id identifier rubyid_add_unconverted_fields'>add_unconverted_fields</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="Array.html" title="Array (class)">Array</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="OptionParser/Arguable.html#initialize-instance_method" title="OptionParser::Arguable#initialize (method)">new</a></span></span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="Array.html" title="Array (class)">Array</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="OptionParser/Arguable.html#initialize-instance_method" title="OptionParser::Arguable#initialize (method)">new</a></span></span><span class='rparen'>)</span>
        <span class='kw'>elsif</span> <span class='ivar'>@use_headers</span>
          <span class='kw'>return</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='op'>::</span><span class='const'>Row</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="Array.html" title="Array (class)">Array</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="OptionParser/Arguable.html#initialize-instance_method" title="OptionParser::Arguable#initialize (method)">new</a></span></span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="Array.html" title="Array (class)">Array</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="OptionParser/Arguable.html#initialize-instance_method" title="OptionParser::Arguable#initialize (method)">new</a></span></span><span class='rparen'>)</span>
        <span class='kw'>else</span>
          <span class='kw'>return</span> <span class='const'><span class='object_link'><a href="Array.html" title="Array (class)">Array</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="OptionParser/Arguable.html#initialize-instance_method" title="OptionParser::Arguable#initialize (method)">new</a></span></span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='kw'>next</span> <span class='kw'>if</span> <span class='ivar'>@skip_lines</span> <span class='kw'>and</span> <span class='ivar'>@skip_lines</span><span class='period'>.</span><span class='id identifier rubyid_match'>match</span> <span class='id identifier rubyid_parse'>parse</span>

    <span class='id identifier rubyid_parts'>parts</span> <span class='op'>=</span>  <span class='id identifier rubyid_parse'>parse</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='ivar'>@col_sep</span><span class='comma'>,</span> <span class='op'>-</span><span class='int'>1</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_parts'>parts</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_in_extended_col'>in_extended_col</span>
        <span class='id identifier rubyid_csv'>csv</span><span class='lbracket'>[</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='ivar'>@col_sep</span>   <span class='comment'># will be replaced with a @row_sep after the parts.each loop
</span>      <span class='kw'>else</span>
        <span class='id identifier rubyid_csv'>csv</span> <span class='op'>&lt;&lt;</span> <span class='kw'>nil</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='comment'># This loop is the hot path of csv parsing. Some things may be non-dry
</span>    <span class='comment'># for a reason. Make sure to benchmark when refactoring.
</span>    <span class='id identifier rubyid_parts'>parts</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_part'>part</span><span class='op'>|</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_in_extended_col'>in_extended_col</span>
        <span class='comment'># If we are continuing a previous column
</span>        <span class='kw'>if</span> <span class='id identifier rubyid_part'>part</span><span class='period'>.</span><span class='id identifier rubyid_end_with?'>end_with?</span><span class='lparen'>(</span><span class='ivar'>@quote_char</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_part'>part</span><span class='period'>.</span><span class='id identifier rubyid_count'>count</span><span class='lparen'>(</span><span class='ivar'>@quote_char</span><span class='rparen'>)</span> <span class='op'>%</span> <span class='int'>2</span> <span class='op'>!=</span> <span class='int'>0</span>
          <span class='comment'># extended column ends
</span>          <span class='id identifier rubyid_csv'>csv</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_part'>part</span><span class='lbracket'>[</span><span class='int'>0</span><span class='op'>..</span><span class='op'>-</span><span class='int'>2</span><span class='rbracket'>]</span>
          <span class='kw'>if</span> <span class='id identifier rubyid_csv'>csv</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span> <span class='op'>=~</span> <span class='ivar'>@parsers</span><span class='lbracket'>[</span><span class='symbol'>:stray_quote</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="CSV/MalformedCSVError.html" title="CSV::MalformedCSVError (class)">MalformedCSVError</a></span></span><span class='comma'>,</span>
                  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Missing or stray quote in line </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_lineno'>lineno</span> <span class='op'>+</span> <span class='int'>1</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
          <span class='kw'>end</span>
          <span class='id identifier rubyid_csv'>csv</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span><span class='ivar'>@double_quote_char</span><span class='comma'>,</span> <span class='ivar'>@quote_char</span><span class='rparen'>)</span>
          <span class='id identifier rubyid_in_extended_col'>in_extended_col</span> <span class='op'>=</span> <span class='kw'>false</span>
        <span class='kw'>else</span>
          <span class='id identifier rubyid_csv'>csv</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_part'>part</span> <span class='op'>&lt;&lt;</span> <span class='ivar'>@col_sep</span>
        <span class='kw'>end</span>
      <span class='kw'>elsif</span> <span class='id identifier rubyid_part'>part</span><span class='period'>.</span><span class='id identifier rubyid_start_with?'>start_with?</span><span class='lparen'>(</span><span class='ivar'>@quote_char</span><span class='rparen'>)</span>
        <span class='comment'># If we are starting a new quoted column
</span>        <span class='kw'>if</span> <span class='id identifier rubyid_part'>part</span><span class='period'>.</span><span class='id identifier rubyid_count'>count</span><span class='lparen'>(</span><span class='ivar'>@quote_char</span><span class='rparen'>)</span> <span class='op'>%</span> <span class='int'>2</span> <span class='op'>!=</span> <span class='int'>0</span>
          <span class='comment'># start an extended column
</span>          <span class='id identifier rubyid_csv'>csv</span> <span class='op'>&lt;&lt;</span> <span class='lparen'>(</span><span class='id identifier rubyid_part'>part</span><span class='lbracket'>[</span><span class='int'>1</span><span class='op'>..</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='ivar'>@col_sep</span><span class='rparen'>)</span>
          <span class='id identifier rubyid_in_extended_col'>in_extended_col</span> <span class='op'>=</span>  <span class='kw'>true</span>
        <span class='kw'>elsif</span> <span class='id identifier rubyid_part'>part</span><span class='period'>.</span><span class='id identifier rubyid_end_with?'>end_with?</span><span class='lparen'>(</span><span class='ivar'>@quote_char</span><span class='rparen'>)</span>
          <span class='comment'># regular quoted column
</span>          <span class='id identifier rubyid_csv'>csv</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_part'>part</span><span class='lbracket'>[</span><span class='int'>1</span><span class='op'>..</span><span class='op'>-</span><span class='int'>2</span><span class='rbracket'>]</span>
          <span class='kw'>if</span> <span class='id identifier rubyid_csv'>csv</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span> <span class='op'>=~</span> <span class='ivar'>@parsers</span><span class='lbracket'>[</span><span class='symbol'>:stray_quote</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="CSV/MalformedCSVError.html" title="CSV::MalformedCSVError (class)">MalformedCSVError</a></span></span><span class='comma'>,</span>
                  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Missing or stray quote in line </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_lineno'>lineno</span> <span class='op'>+</span> <span class='int'>1</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
          <span class='kw'>end</span>
          <span class='id identifier rubyid_csv'>csv</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span><span class='ivar'>@double_quote_char</span><span class='comma'>,</span> <span class='ivar'>@quote_char</span><span class='rparen'>)</span>
        <span class='kw'>elsif</span> <span class='ivar'>@liberal_parsing</span>
          <span class='id identifier rubyid_csv'>csv</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_part'>part</span>
        <span class='kw'>else</span>
          <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="CSV/MalformedCSVError.html" title="CSV::MalformedCSVError (class)">MalformedCSVError</a></span></span><span class='comma'>,</span>
                <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Missing or stray quote in line </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_lineno'>lineno</span> <span class='op'>+</span> <span class='int'>1</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
      <span class='kw'>elsif</span> <span class='id identifier rubyid_part'>part</span> <span class='op'>=~</span> <span class='ivar'>@parsers</span><span class='lbracket'>[</span><span class='symbol'>:quote_or_nl</span><span class='rbracket'>]</span>
        <span class='comment'># Unquoted field with bad characters.
</span>        <span class='kw'>if</span> <span class='id identifier rubyid_part'>part</span> <span class='op'>=~</span> <span class='ivar'>@parsers</span><span class='lbracket'>[</span><span class='symbol'>:nl_or_lf</span><span class='rbracket'>]</span>
          <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="CSV/MalformedCSVError.html" title="CSV::MalformedCSVError (class)">MalformedCSVError</a></span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Unquoted fields do not allow </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span>
                                   <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\\r or \\n (line </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_lineno'>lineno</span> <span class='op'>+</span> <span class='int'>1</span><span class='embexpr_end'>}</span><span class='tstring_content'>).</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>else</span>
          <span class='kw'>if</span> <span class='ivar'>@liberal_parsing</span>
            <span class='id identifier rubyid_csv'>csv</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_part'>part</span>
          <span class='kw'>else</span>
            <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="CSV/MalformedCSVError.html" title="CSV::MalformedCSVError (class)">MalformedCSVError</a></span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Illegal quoting in line </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_lineno'>lineno</span> <span class='op'>+</span> <span class='int'>1</span><span class='embexpr_end'>}</span><span class='tstring_content'>.</span><span class='tstring_end'>&quot;</span></span>
          <span class='kw'>end</span>
        <span class='kw'>end</span>
      <span class='kw'>else</span>
        <span class='comment'># Regular ole unquoted field.
</span>        <span class='id identifier rubyid_csv'>csv</span> <span class='op'>&lt;&lt;</span> <span class='lparen'>(</span><span class='id identifier rubyid_part'>part</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span> <span class='op'>?</span> <span class='kw'>nil</span> <span class='op'>:</span> <span class='id identifier rubyid_part'>part</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='comment'># Replace tacked on @col_sep with @row_sep if we are still in an extended
</span>    <span class='comment'># column.
</span>    <span class='id identifier rubyid_csv'>csv</span><span class='lbracket'>[</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='ivar'>@row_sep</span> <span class='kw'>if</span> <span class='id identifier rubyid_in_extended_col'>in_extended_col</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_in_extended_col'>in_extended_col</span>
      <span class='comment'># if we&#39;re at eof?(), a quoted field wasn&#39;t closed...
</span>      <span class='kw'>if</span> <span class='ivar'>@io</span><span class='period'>.</span><span class='id identifier rubyid_eof?'>eof?</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="CSV/MalformedCSVError.html" title="CSV::MalformedCSVError (class)">MalformedCSVError</a></span></span><span class='comma'>,</span>
              <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Unclosed quoted field on line </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_lineno'>lineno</span> <span class='op'>+</span> <span class='int'>1</span><span class='embexpr_end'>}</span><span class='tstring_content'>.</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>elsif</span> <span class='ivar'>@field_size_limit</span> <span class='kw'>and</span> <span class='id identifier rubyid_csv'>csv</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&gt;=</span> <span class='ivar'>@field_size_limit</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="CSV/MalformedCSVError.html" title="CSV::MalformedCSVError (class)">MalformedCSVError</a></span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Field size exceeded on line </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_lineno'>lineno</span> <span class='op'>+</span> <span class='int'>1</span><span class='embexpr_end'>}</span><span class='tstring_content'>.</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>end</span>
      <span class='comment'># otherwise, we need to loop and pull some more data to complete the row
</span>    <span class='kw'>else</span>
      <span class='ivar'>@lineno</span> <span class='op'>+=</span> <span class='int'>1</span>

      <span class='comment'># save fields unconverted fields, if needed...
</span>      <span class='id identifier rubyid_unconverted'>unconverted</span> <span class='op'>=</span> <span class='id identifier rubyid_csv'>csv</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span> <span class='kw'>if</span> <span class='ivar'>@unconverted_fields</span>

      <span class='comment'># convert fields, if needed...
</span>      <span class='id identifier rubyid_csv'>csv</span> <span class='op'>=</span> <span class='id identifier rubyid_convert_fields'>convert_fields</span><span class='lparen'>(</span><span class='id identifier rubyid_csv'>csv</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='ivar'>@use_headers</span> <span class='kw'>or</span> <span class='ivar'>@converters</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
      <span class='comment'># parse out header rows and handle CSV::Row conversions...
</span>      <span class='id identifier rubyid_csv'>csv</span> <span class='op'>=</span> <span class='id identifier rubyid_parse_headers'>parse_headers</span><span class='lparen'>(</span><span class='id identifier rubyid_csv'>csv</span><span class='rparen'>)</span>  <span class='kw'>if</span>     <span class='ivar'>@use_headers</span>

      <span class='comment'># inject unconverted fields and accessor, if requested...
</span>      <span class='kw'>if</span> <span class='ivar'>@unconverted_fields</span> <span class='kw'>and</span> <span class='kw'>not</span> <span class='id identifier rubyid_csv'>csv</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span> <span class='symbol'>:unconverted_fields</span>
        <span class='id identifier rubyid_add_unconverted_fields'>add_unconverted_fields</span><span class='lparen'>(</span><span class='id identifier rubyid_csv'>csv</span><span class='comma'>,</span> <span class='id identifier rubyid_unconverted'>unconverted</span><span class='rparen'>)</span>
      <span class='kw'>end</span>

      <span class='comment'># return the results
</span>      <span class='kw'>break</span> <span class='id identifier rubyid_csv'>csv</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="skip_blanks?-instance_method">
  
    #<strong>skip_blanks?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns <code>true</code> blank lines are skipped by the parser. See
CSV::new for details.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1637</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/csv.rb', line 1637</span>

<span class='kw'>def</span> <span class='id identifier rubyid_skip_blanks?'>skip_blanks?</span><span class='lparen'>(</span><span class='rparen'>)</span>        <span class='ivar'>@skip_blanks</span>        <span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="unconverted_fields?-instance_method">
  
    #<strong>unconverted_fields?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns <code>true</code> if unconverted_fields() to parsed results.  See
CSV::new for details.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1606</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/csv.rb', line 1606</span>

<span class='kw'>def</span> <span class='id identifier rubyid_unconverted_fields?'>unconverted_fields?</span><span class='lparen'>(</span><span class='rparen'>)</span> <span class='ivar'>@unconverted_fields</span> <span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="write_headers?-instance_method">
  
    #<strong>write_headers?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns <code>true</code> if headers are written in output. See CSV::new
for details.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1621</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/csv.rb', line 1621</span>

<span class='kw'>def</span> <span class='id identifier rubyid_write_headers?'>write_headers?</span><span class='lparen'>(</span><span class='rparen'>)</span>      <span class='ivar'>@write_headers</span>      <span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Mon Feb 26 22:17:44 2018 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.12 (ruby-2.4.2).
</div>

    </div>
  </body>
</html>