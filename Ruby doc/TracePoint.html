<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: TracePoint
  
    &mdash; Documentation by YARD 0.9.12
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "TracePoint";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index (T)</a> &raquo;
    
    
    <span class="title">TracePoint</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: TracePoint
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName"><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></li>
          
            <li class="next">TracePoint</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>vm_trace.c<span class="defines">,<br />
  vm_trace.c</span>
</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>A class that provides the functionality of Kernel#set_trace_func in a nice
Object-Oriented API.</p>

<h2 id="label-Example">Example</h2>

<p>We can use TracePoint to gather information specifically for exceptions:</p>

<pre class="code ruby"><code class="ruby">trace = TracePoint.new(:raise) do |tp|</code></pre>

<p>p [tp.lineno, tp.event, tp.raised_exception]</p>

<pre class="code ruby"><code class="ruby">end
#=&gt; #&lt;TracePoint:disabled&gt;

trace.enable
#=&gt; false

0 / 0
#=&gt; [5, :raise, #&lt;ZeroDivisionError: divided by 0&gt;]</code></pre>

<h2 id="label-Events">Events</h2>

<p>If you don&#39;t specify the type of events you want to listen for,
TracePoint will include all available events.</p>

<p><strong>Note</strong> do not depend on current event set, as this list is
subject to change. Instead, it is recommended you specify the type of
events you want to use.</p>

<p>To filter what is traced, you can pass any of the following as
<code>events</code>:</p>
<dl class="rdoc-list note-list"><dt><code>:line</code>
<dd>
<p>execute code on a new line</p>
</dd><dt><code>:class</code>
<dd>
<p>start a class or module definition</p>
</dd><dt><code>:end</code>
<dd>
<p>finish a class or module definition</p>
</dd><dt><code>:call</code>
<dd>
<p>call a Ruby method</p>
</dd><dt><code>:return</code>
<dd>
<p>return from a Ruby method</p>
</dd><dt><code>:c_call</code>
<dd>
<p>call a C-language routine</p>
</dd><dt><code>:c_return</code>
<dd>
<p>return from a C-language routine</p>
</dd><dt><code>:raise</code>
<dd>
<p>raise an exception</p>
</dd><dt><code>:b_call</code>
<dd>
<p>event hook at block entry</p>
</dd><dt><code>:b_return</code>
<dd>
<p>event hook at block ending</p>
</dd><dt><code>:thread_begin</code>
<dd>
<p>event hook at thread beginning</p>
</dd><dt><code>:thread_end</code>
<dd>
<p>event hook at thread ending</p>
</dd><dt><code>:fiber_switch</code>
<dd>
<p>event hook at fiber switch</p>
</dd></dl>


  </div>
</div>
<div class="tags">
  

</div>






  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#new-class_method" title="new (class method)">.<strong>new</strong>(*args)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>TracePoint.new(*events) { |obj| block }	    -&gt; obj.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#stat-class_method" title="stat (class method)">.<strong>stat</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>TracePoint.stat -&gt; obj.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#trace-class_method" title="trace (class method)">.<strong>trace</strong>(*args)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>call-seq: TracePoint.trace(*events) { |obj| block }	-&gt; obj.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#binding-instance_method" title="#binding (instance method)">#<strong>binding</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Return the generated binding object from event.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#callee_id-instance_method" title="#callee_id (instance method)">#<strong>callee_id</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Return the called name of the method being called.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#defined_class-instance_method" title="#defined_class (instance method)">#<strong>defined_class</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Return class or module of the method being called.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#disable-instance_method" title="#disable (instance method)">#<strong>disable</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>trace.disable		-&gt; true or false trace.disable { block } -&gt; obj.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#enable-instance_method" title="#enable (instance method)">#<strong>enable</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>trace.enable		-&gt; true or false trace.enable { block }	-&gt; obj.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#enabled%3F-instance_method" title="#enabled? (instance method)">#<strong>enabled?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>trace.enabled?	    -&gt; true or false.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#event-instance_method" title="#event (instance method)">#<strong>event</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Type of event.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#inspect-instance_method" title="#inspect (instance method)">#<strong>inspect</strong>  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Return a string containing a human-readable TracePoint status.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#lineno-instance_method" title="#lineno (instance method)">#<strong>lineno</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Line number of the event.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#method_id-instance_method" title="#method_id (instance method)">#<strong>method_id</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Return the name at the definition of the method being called.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#path-instance_method" title="#path (instance method)">#<strong>path</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Path of the file being run.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#raised_exception-instance_method" title="#raised_exception (instance method)">#<strong>raised_exception</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Value from exception raised on the <code>:raise</code> event.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#return_value-instance_method" title="#return_value (instance method)">#<strong>return_value</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Return value from <code>:return</code>, <code>c_return</code>, and
<code>b_return</code> event.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#self-instance_method" title="#self (instance method)">#<strong>self</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Return the trace object during event.</p>
</div></span>
  
</li>

      
    </ul>
  



  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="new-class_method">
  
    .<strong>new</strong>(*args)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>TracePoint.new(*events) { |obj| block }	    -&gt; obj</p>

<p>Returns a new TracePoint object, not enabled by default.</p>

<p>Next, in order to activate the trace, you must use TracePoint#enable</p>

<p>trace = TracePoint.new(:call) do |tp|</p>

<pre class="code"><code class=""><span class='id identifier rubyid_p'>p</span> <span class='lbracket'>[</span><span class='id identifier rubyid_tp'>tp</span><span class='period'>.</span><span class='id identifier rubyid_lineno'>lineno</span><span class='comma'>,</span> <span class='id identifier rubyid_tp'>tp</span><span class='period'>.</span><span class='id identifier rubyid_defined_class'>defined_class</span><span class='comma'>,</span> <span class='id identifier rubyid_tp'>tp</span><span class='period'>.</span><span class='id identifier rubyid_method_id'>method_id</span><span class='comma'>,</span> <span class='id identifier rubyid_tp'>tp</span><span class='period'>.</span><span class='id identifier rubyid_event'>event</span><span class='rbracket'>]</span>
</code></pre>

<p>end #=&gt; #&lt;TracePoint:disabled&gt;</p>

<p>trace.enable #=&gt; false</p>

<p>puts “Hello, TracePoint!” # … # [48, IRB::Notifier::AbstractNotifier,
:printf, :call] # …</p>

<p>When you want to deactivate the trace, you must use TracePoint#disable</p>

<p>trace.disable</p>

<p>See TracePoint@Events for possible events and more information.</p>

<p>A block must be given, otherwise an ArgumentError is raised.</p>

<p>If the trace method isn&#39;t included in the given events filter, a
RuntimeError is raised.</p>

<p>TracePoint.trace(:line) do |tp|</p>

<pre class="code"><code class=""><span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_tp'>tp</span><span class='period'>.</span><span class='id identifier rubyid_raised_exception'>raised_exception</span>
</code></pre>

<p>end #=&gt; RuntimeError: &#39;raised_exception&#39; not supported by this
event</p>

<p>If the trace method is called outside block, a RuntimeError is raised.</p>

<pre class="code"><code class=""><span class='const'><span class='object_link'><a href="" title="TracePoint (class)">TracePoint</a></span></span><span class='period'>.</span><span class='id identifier rubyid_trace'><span class='object_link'><a href="#trace-class_method" title="TracePoint.trace (method)">trace</a></span></span><span class='lparen'>(</span><span class='symbol'>:line</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_tp'>tp</span><span class='op'>|</span>
  <span class='gvar'>$tp</span> <span class='op'>=</span> <span class='id identifier rubyid_tp'>tp</span>
<span class='kw'>end</span>
<span class='gvar'>$tp</span><span class='period'>.</span><span class='id identifier rubyid_lineno'>lineno</span> <span class='comment'>#=&gt; access from outside (RuntimeError)
</span></code></pre>

<p>Access from other threads is also forbidden.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1293
1294
1295
1296
1297
1298
1299
1300
1301
1302
1303
1304
1305
1306
1307
1308
1309
1310
1311
1312
1313</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'vm_trace.c', line 1293</span>

static VALUE
tracepoint_new_s(int argc, VALUE *argv, VALUE self)
{
    rb_event_flag_t events = 0;
    int i;

    if (argc &gt; 0) {
	for (i=0; i&lt;argc; i++) {
	    events |= symbol2event_flag(argv[i]);
	}
    }
    else {
	events = RUBY_EVENT_TRACEPOINT_ALL;
    }

    if (!rb_block_given_p()) {
	rb_raise(rb_eArgError, &quot;must be called with a block&quot;);
    }

    return tracepoint_new(self, 0, events, 0, 0, rb_block_proc());
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="stat-class_method">
  
    .<strong>stat</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>TracePoint.stat -&gt; obj</p>

<pre class="code"><code class="">Returns internal information of TracePoint.

The contents of the returned value are implementation specific.
It may be changed in future.

This method is only for debugging TracePoint itself.</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1407
1408
1409
1410
1411
1412
1413
1414
1415
1416
1417</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'vm_trace.c', line 1407</span>

static VALUE
tracepoint_stat_s(VALUE self)
{
    rb_vm_t *vm = GET_VM();
    VALUE stat = rb_hash_new();

    tracepoint_stat_event_hooks(stat, vm-&gt;self, vm-&gt;event_hooks.hooks);
    /* TODO: thread local hooks */

    return stat;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="trace-class_method">
  
    .<strong>trace</strong>(*args)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>call-seq: TracePoint.trace(*events) { |obj| block }	-&gt; obj</p>

<pre class="code"><code class="">A convenience method for TracePoint.new, that activates the trace
automatically.

   trace = TracePoint.trace(:call) { |tp| [tp.lineno, tp.event] }
   #=&gt; #&lt;TracePoint:enabled&gt;

   trace.enabled? #=&gt; true</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1315
1316
1317
1318
1319
1320
1321</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'vm_trace.c', line 1315</span>

static VALUE
tracepoint_trace_s(int argc, VALUE *argv, VALUE self)
{
    VALUE trace = tracepoint_new_s(argc, argv, self);
    rb_tracepoint_enable(trace);
    return trace;
}</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="binding-instance_method">
  
    #<strong>binding</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Return the generated binding object from event</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


983
984
985
986
987</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'vm_trace.c', line 983</span>

static VALUE
tracepoint_attr_binding(VALUE tpval)
{
    return rb_tracearg_binding(get_trace_arg());
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="callee_id-instance_method">
  
    #<strong>callee_id</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Return the called name of the method being called</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


934
935
936
937
938</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'vm_trace.c', line 934</span>

static VALUE
tracepoint_attr_callee_id(VALUE tpval)
{
    return rb_tracearg_callee_id(get_trace_arg());
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="defined_class-instance_method">
  
    #<strong>defined_class</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Return class or module of the method being called.</p>

<p>class C; def foo; end; end 	trace = TracePoint.new(:call) do |tp| 	  p
tp.defined_class #=&gt; C 	end.enable do 	  C.new.foo 	end</p>

<p>If method is defined by a module, then that module is returned.</p>

<p>module M; def foo; end; end 	class C; include M; end; 	trace =
TracePoint.new(:call) do |tp| 	  p tp.defined_class #=&gt; M 	end.enable do
	  C.new.foo 	end</p>

<p><strong>Note:</strong> #defined_class returns singleton class.</p>

<p>6th block parameter of Kernel#set_trace_func passes original class of
attached by singleton class.</p>

<p><strong>This is a difference between Kernel#set_trace_func and
TracePoint.</strong></p>

<p>class C; def self.foo; end; end 	trace = TracePoint.new(:call) do |tp| 	  p
tp.defined_class #=&gt; #&lt;Class:C&gt; 	end.enable do 	  C.foo 	end</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


974
975
976
977
978</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'vm_trace.c', line 974</span>

static VALUE
tracepoint_attr_defined_class(VALUE tpval)
{
    return rb_tracearg_defined_class(get_trace_arg());
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="disable-instance_method">
  
    #<strong>disable</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>trace.disable		-&gt; true or false trace.disable { block } -&gt; obj</p>

<p>Deactivates the trace</p>

<p>Return true if trace was enabled. Return false if trace was disabled.</p>

<p>trace.enabled?	#=&gt; true trace.disable	#=&gt; true (previous status)
trace.enabled?	#=&gt; false trace.disable	#=&gt; false</p>

<p>If a block is given, the trace will only be disable within the scope of the
block.</p>

<p>trace.enabled? #=&gt; true</p>

<p>trace.disable do</p>

<pre class="code"><code class=""><span class='id identifier rubyid_trace'>trace</span><span class='period'>.</span><span class='id identifier rubyid_enabled?'>enabled?</span>
<span class='comment'># only disabled for this block
</span></code></pre>

<p>end</p>

<p>trace.enabled? #=&gt; true</p>

<p>Note: You cannot access event hooks within the block.</p>

<p>trace.disable { p tp.lineno } #=&gt; RuntimeError: access from outside</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1156
1157
1158
1159
1160
1161
1162
1163
1164
1165
1166
1167
1168
1169
1170
1171</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'vm_trace.c', line 1156</span>

static VALUE
tracepoint_disable_m(VALUE tpval)
{
    rb_tp_t *tp = tpptr(tpval);
    int previous_tracing = tp-&gt;tracing;
    rb_tracepoint_disable(tpval);

    if (rb_block_given_p()) {
	return rb_ensure(rb_yield, Qundef,
			 previous_tracing ? rb_tracepoint_enable : rb_tracepoint_disable,
			 tpval);
    }
    else {
	return previous_tracing ? Qtrue : Qfalse;
    }
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="enable-instance_method">
  
    #<strong>enable</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>trace.enable		-&gt; true or false trace.enable { block }	-&gt; obj</p>

<p>Activates the trace</p>

<p>Return true if trace was enabled. Return false if trace was disabled.</p>

<p>trace.enabled?  #=&gt; false trace.enable    #=&gt; false (previous state)</p>

<pre class="code"><code class=""><span class='comment'>#   trace is enabled
</span></code></pre>

<p>trace.enabled?  #=&gt; true trace.enable    #=&gt; true (previous state)</p>

<pre class="code"><code class=""><span class='comment'>#   trace is still enabled
</span></code></pre>

<p>If a block is given, the trace will only be enabled within the scope of the
block.</p>

<p>trace.enabled? #=&gt; false</p>

<p>trace.enable do</p>

<pre class="code"><code class=""><span class='id identifier rubyid_trace'>trace</span><span class='period'>.</span><span class='id identifier rubyid_enabled?'>enabled?</span>
<span class='comment'># only enabled for this block
</span></code></pre>

<p>end</p>

<p>trace.enabled? #=&gt; false</p>

<p>Note: You cannot access event hooks within the block.</p>

<p>trace.enable { p tp.lineno } #=&gt; RuntimeError: access from outside</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1105
1106
1107
1108
1109
1110
1111
1112
1113
1114
1115
1116
1117
1118
1119
1120</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'vm_trace.c', line 1105</span>

static VALUE
tracepoint_enable_m(VALUE tpval)
{
    rb_tp_t *tp = tpptr(tpval);
    int previous_tracing = tp-&gt;tracing;
    rb_tracepoint_enable(tpval);

    if (rb_block_given_p()) {
	return rb_ensure(rb_yield, Qundef,
			 previous_tracing ? rb_tracepoint_enable : rb_tracepoint_disable,
			 tpval);
    }
    else {
	return previous_tracing ? Qtrue : Qfalse;
    }
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="enabled?-instance_method">
  
    #<strong>enabled?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>trace.enabled?	    -&gt; true or false</p>

<p>The current status of the trace</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1179
1180
1181
1182
1183
1184</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'vm_trace.c', line 1179</span>

VALUE
rb_tracepoint_enabled_p(VALUE tpval)
{
    rb_tp_t *tp = tpptr(tpval);
    return tp-&gt;tracing ? Qtrue : Qfalse;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="event-instance_method">
  
    #<strong>event</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Type of event</p>

<p>See TracePoint@Events for more information.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


898
899
900
901
902</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'vm_trace.c', line 898</span>

static VALUE
tracepoint_attr_event(VALUE tpval)
{
    return rb_tracearg_event(get_trace_arg());
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="inspect-instance_method">
  
    #<strong>inspect</strong>  &#x21d2; <tt><span class='object_link'><a href="String.html" title="String (class)">String</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Return a string containing a human-readable TracePoint status.</p>


  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1331
1332
1333
1334
1335
1336
1337
1338
1339
1340
1341
1342
1343
1344
1345
1346
1347
1348
1349
1350
1351
1352
1353
1354
1355
1356
1357
1358
1359
1360
1361
1362
1363
1364
1365
1366
1367
1368
1369
1370
1371
1372
1373
1374
1375</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'vm_trace.c', line 1331</span>

static VALUE
tracepoint_inspect(VALUE self)
{
    rb_tp_t *tp = tpptr(self);
    rb_trace_arg_t *trace_arg = GET_EC()-&gt;trace_arg;

    if (trace_arg) {
	switch (trace_arg-&gt;event) {
	  case RUBY_EVENT_LINE:
	    {
		VALUE sym = rb_tracearg_method_id(trace_arg);
		if (NIL_P(sym))
		    goto default_inspect;
		return rb_sprintf(&quot;#&lt;TracePoint:%&quot;PRIsVALUE&quot;@%&quot;PRIsVALUE&quot;:%d in `%&quot;PRIsVALUE&quot;&#39;&gt;&quot;,
				  rb_tracearg_event(trace_arg),
				  rb_tracearg_path(trace_arg),
				  FIX2INT(rb_tracearg_lineno(trace_arg)),
				  sym);
	    }
	  case RUBY_EVENT_CALL:
	  case RUBY_EVENT_C_CALL:
	  case RUBY_EVENT_RETURN:
	  case RUBY_EVENT_C_RETURN:
	    return rb_sprintf(&quot;#&lt;TracePoint:%&quot;PRIsVALUE&quot; `%&quot;PRIsVALUE&quot;&#39;@%&quot;PRIsVALUE&quot;:%d&gt;&quot;,
			      rb_tracearg_event(trace_arg),
			      rb_tracearg_method_id(trace_arg),
			      rb_tracearg_path(trace_arg),
			      FIX2INT(rb_tracearg_lineno(trace_arg)));
	  case RUBY_EVENT_THREAD_BEGIN:
	  case RUBY_EVENT_THREAD_END:
	    return rb_sprintf(&quot;#&lt;TracePoint:%&quot;PRIsVALUE&quot; %&quot;PRIsVALUE&quot;&gt;&quot;,
			      rb_tracearg_event(trace_arg),
			      rb_tracearg_self(trace_arg));
	  default:
	  default_inspect:
	    return rb_sprintf(&quot;#&lt;TracePoint:%&quot;PRIsVALUE&quot;@%&quot;PRIsVALUE&quot;:%d&gt;&quot;,
			      rb_tracearg_event(trace_arg),
			      rb_tracearg_path(trace_arg),
			      FIX2INT(rb_tracearg_lineno(trace_arg)));
	}
    }
    else {
	return rb_sprintf(&quot;#&lt;TracePoint:%s&gt;&quot;, tp-&gt;tracing ? &quot;enabled&quot; : &quot;disabled&quot;);
    }
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="lineno-instance_method">
  
    #<strong>lineno</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Line number of the event</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


907
908
909
910
911</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'vm_trace.c', line 907</span>

static VALUE
tracepoint_attr_lineno(VALUE tpval)
{
    return rb_tracearg_lineno(get_trace_arg());
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="method_id-instance_method">
  
    #<strong>method_id</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Return the name at the definition of the method being called</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


925
926
927
928
929</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'vm_trace.c', line 925</span>

static VALUE
tracepoint_attr_method_id(VALUE tpval)
{
    return rb_tracearg_method_id(get_trace_arg());
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="path-instance_method">
  
    #<strong>path</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Path of the file being run</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


916
917
918
919
920</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'vm_trace.c', line 916</span>

static VALUE
tracepoint_attr_path(VALUE tpval)
{
    return rb_tracearg_path(get_trace_arg());
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="raised_exception-instance_method">
  
    #<strong>raised_exception</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Value from exception raised on the <code>:raise</code> event</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1013
1014
1015
1016
1017</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'vm_trace.c', line 1013</span>

static VALUE
tracepoint_attr_raised_exception(VALUE tpval)
{
    return rb_tracearg_raised_exception(get_trace_arg());
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="return_value-instance_method">
  
    #<strong>return_value</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Return value from <code>:return</code>, <code>c_return</code>, and
<code>b_return</code> event</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1004
1005
1006
1007
1008</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'vm_trace.c', line 1004</span>

static VALUE
tracepoint_attr_return_value(VALUE tpval)
{
    return rb_tracearg_return_value(get_trace_arg());
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="self-instance_method">
  
    #<strong>self</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Return the trace object during event</p>

<p>Same as TracePoint#binding: trace.binding.eval(&#39;self&#39;)</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


995
996
997
998
999</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'vm_trace.c', line 995</span>

static VALUE
tracepoint_attr_self(VALUE tpval)
{
    return rb_tracearg_self(get_trace_arg());
}</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Mon Feb 26 22:23:28 2018 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.12 (ruby-2.4.2).
</div>

    </div>
  </body>
</html>