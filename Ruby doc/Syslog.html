<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Module: Syslog
  
    &mdash; Documentation by YARD 0.9.12
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "Syslog";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index (S)</a> &raquo;
    
    
    <span class="title">Syslog</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Module: Syslog
  
  
  
</h1>
<div class="box_info">
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>ext/syslog/syslog.c</dd>
  </dl>
  
</div>

<h2>Defined Under Namespace</h2>
<p class="children">
  
    
      <strong class="modules">Modules:</strong> <span class='object_link'><a href="Syslog/Constants.html" title="Syslog::Constants (module)">Constants</a></span>, <span class='object_link'><a href="Syslog/Facility.html" title="Syslog::Facility (module)">Facility</a></span>, <span class='object_link'><a href="Syslog/Level.html" title="Syslog::Level (module)">Level</a></span>, <span class='object_link'><a href="Syslog/Macros.html" title="Syslog::Macros (module)">Macros</a></span>, <span class='object_link'><a href="Syslog/Option.html" title="Syslog::Option (module)">Option</a></span>
    
  
    
  
</p>







  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#close-class_method" title="close (class method)">.<strong>close</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Closes the syslog facility.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#facility-class_method" title="facility (class method)">.<strong>facility</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the facility number used in the last call to open().</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ident-class_method" title="ident (class method)">.<strong>ident</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the identity string used in the last call to open().</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#inspect-class_method" title="inspect (class method)">.<strong>inspect</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns an inspect() string summarizing the object state.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#instance-class_method" title="instance (class method)">.<strong>instance</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns self, for backward compatibility.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#log-class_method" title="log (class method)">.<strong>log</strong>(priority, format_string, *format_args)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Log a message with the specified priority.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mask-class_method" title="mask (class method)">.<strong>mask</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the log priority mask in effect.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mask=-class_method" title="mask= (class method)">.<strong>mask=</strong>(priority_mask)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sets the log priority mask.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#open-class_method" title="open (class method)">.<strong>open</strong>(ident, options, facility)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>:yields: syslog.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#open!-class_method" title="reopen (class method)">.<strong>reopen</strong>(ident, options, facility)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>:yields: syslog.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#opened%3F-class_method" title="opened? (class method)">.<strong>opened?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns true if the syslog is open.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#options-class_method" title="options (class method)">.<strong>options</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the options bitmask used in the last call to open().</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#reopen-class_method" title="reopen (class method)">.<strong>reopen</strong>(ident, options, facility)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>:yields: syslog.</p>
</div></span>
  
</li>

      
    </ul>
  



  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="close-class_method">
  
    .<strong>close</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Closes the syslog facility. Raises a runtime exception if it is not open.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


56
57
58
59
60
61
62
63
64
65
66
67
68
69
70</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/syslog/syslog.c', line 56</span>

static VALUE mSyslog_close(VALUE self)
{
    if (!syslog_opened) {
        rb_raise(rb_eRuntimeError, &quot;syslog not opened&quot;);
    }

    closelog();

    xfree((void *)syslog_ident);
    syslog_ident = NULL;
    syslog_options = syslog_facility = syslog_mask = -1;
    syslog_opened = 0;

    return Qnil;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="facility-class_method">
  
    .<strong>facility</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the facility number used in the last call to open()</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


236
237
238
239</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/syslog/syslog.c', line 236</span>

static VALUE mSyslog_facility(VALUE self)
{
    return syslog_opened ? INT2NUM(syslog_facility) : Qnil;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="ident-class_method">
  
    .<strong>ident</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the identity string used in the last call to open()</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


222
223
224
225</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/syslog/syslog.c', line 222</span>

static VALUE mSyslog_ident(VALUE self)
{
    return syslog_opened ? rb_str_new2(syslog_ident) : Qnil;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="inspect-class_method">
  
    .<strong>inspect</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns an inspect() string summarizing the object state.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


325
326
327
328
329
330
331
332
333
334
335
336
337
338</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/syslog/syslog.c', line 325</span>

static VALUE mSyslog_inspect(VALUE self)
{
    Check_Type(self, T_MODULE);

    if (!syslog_opened)
	return rb_sprintf(&quot;&lt;#%&quot;PRIsVALUE&quot;: opened=false&gt;&quot;, self);

    return rb_sprintf(&quot;&lt;#%&quot;PRIsVALUE&quot;: opened=true, ident=\&quot;%s\&quot;, options=%d, facility=%d, mask=%d&gt;&quot;,
		      self,
		      syslog_ident,
		      syslog_options,
		      syslog_facility,
		      syslog_mask);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="instance-class_method">
  
    .<strong>instance</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns self, for backward compatibility.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


342
343
344
345</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/syslog/syslog.c', line 342</span>

static VALUE mSyslog_instance(VALUE self)
{
    return self;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="log-class_method">
  
    .<strong>log</strong>(priority, format_string, *format_args)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Log a message with the specified priority. Example:</p>

<pre class="code"><code class=""><span class='const'><span class='object_link'><a href="" title="Syslog (module)">Syslog</a></span></span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="" title="Syslog (module)">Syslog</a></span></span><span class='op'>::</span><span class='const'>LOG_CRIT</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Out of disk space</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='const'><span class='object_link'><a href="" title="Syslog (module)">Syslog</a></span></span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="" title="Syslog (module)">Syslog</a></span></span><span class='op'>::</span><span class='const'>LOG_CRIT</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>User %s logged in</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="ENV.html" title="ENV (class)">ENV</a></span></span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>USER</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
</code></pre>

<p>The priority levels, in descending order, are:</p>
<dl class="rdoc-list note-list"><dt>LOG_EMERG
<dd>
<p>System is unusable</p>
</dd><dt>LOG_ALERT
<dd>
<p>Action needs to be taken immediately</p>
</dd><dt>LOG_CRIT
<dd>
<p>A critical condition has occurred</p>
</dd><dt>LOG_ERR
<dd>
<p>An error occurred</p>
</dd><dt>LOG_WARNING
<dd>
<p>Warning of a possible problem</p>
</dd><dt>LOG_NOTICE
<dd>
<p>A normal but significant condition occurred</p>
</dd><dt>LOG_INFO
<dd>
<p>Informational message</p>
</dd><dt>LOG_DEBUG
<dd>
<p>Debugging information</p>
</dd></dl>

<p>Each priority level also has a shortcut method that logs with it&#39;s
named priority. As an example, the two following statements would produce
the same result:</p>

<pre class="code"><code class=""><span class='const'><span class='object_link'><a href="" title="Syslog (module)">Syslog</a></span></span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="" title="Syslog (module)">Syslog</a></span></span><span class='op'>::</span><span class='const'>LOG_ALERT</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Out of memory</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='const'><span class='object_link'><a href="" title="Syslog (module)">Syslog</a></span></span><span class='period'>.</span><span class='id identifier rubyid_alert'>alert</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Out of memory</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
</code></pre>

<p>Format strings are as for printf/sprintf, except that in addition %m is
replaced with the error message string that would be returned by
strerror(errno).</p>


  </div>
</div>
<div class="tags">
  
  


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/syslog/syslog.c', line 305</span>

static VALUE mSyslog_log(int argc, VALUE *argv, VALUE self)
{
    VALUE pri;

    rb_check_arity(argc, 2, UNLIMITED_ARGUMENTS);

    argc--;
    pri = *argv++;

    if (!FIXNUM_P(pri)) {
	rb_raise(rb_eTypeError, &quot;type mismatch: %&quot;PRIsVALUE&quot; given&quot;, rb_obj_class(pri));
    }

    syslog_write(FIX2INT(pri), argc, argv);

    return self;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mask-class_method">
  
    .<strong>mask</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the log priority mask in effect. The mask is not reset by opening
or closing syslog.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


244
245
246
247</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/syslog/syslog.c', line 244</span>

static VALUE mSyslog_get_mask(VALUE self)
{
    return syslog_opened ? INT2NUM(syslog_mask) : Qnil;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mask=-class_method">
  
    .<strong>mask=</strong>(priority_mask)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Sets the log priority mask. A method LOG_UPTO is defined to make it easier
to set mask values. Example:</p>

<pre class="code"><code class=""><span class='const'><span class='object_link'><a href="" title="Syslog (module)">Syslog</a></span></span><span class='period'>.</span><span class='id identifier rubyid_mask'><span class='object_link'><a href="#mask-class_method" title="Syslog.mask (method)">mask</a></span></span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="" title="Syslog (module)">Syslog</a></span></span><span class='op'>::</span><span class='const'>LOG_UPTO</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="" title="Syslog (module)">Syslog</a></span></span><span class='op'>::</span><span class='const'>LOG_ERR</span><span class='rparen'>)</span>
</code></pre>

<p>Alternatively, specific priorities can be selected and added together using
binary OR. Example:</p>

<pre class="code"><code class=""><span class='const'><span class='object_link'><a href="" title="Syslog (module)">Syslog</a></span></span><span class='period'>.</span><span class='id identifier rubyid_mask'><span class='object_link'><a href="#mask-class_method" title="Syslog.mask (method)">mask</a></span></span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="" title="Syslog (module)">Syslog</a></span></span><span class='op'>::</span><span class='const'>LOG_MASK</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="" title="Syslog (module)">Syslog</a></span></span><span class='op'>::</span><span class='const'>LOG_ERR</span><span class='rparen'>)</span> <span class='op'>|</span> <span class='const'><span class='object_link'><a href="" title="Syslog (module)">Syslog</a></span></span><span class='op'>::</span><span class='const'>LOG_MASK</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="" title="Syslog (module)">Syslog</a></span></span><span class='op'>::</span><span class='const'>LOG_CRIT</span><span class='rparen'>)</span>
</code></pre>

<p>The priority mask persists through calls to open() and close().</p>


  </div>
</div>
<div class="tags">
  
  


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


264
265
266
267
268
269
270
271
272
273</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/syslog/syslog.c', line 264</span>

static VALUE mSyslog_set_mask(VALUE self, VALUE mask)
{
    if (!syslog_opened) {
        rb_raise(rb_eRuntimeError, &quot;must open syslog before setting log mask&quot;);
    }

    setlogmask(syslog_mask = NUM2INT(mask));

    return mask;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="open-class_method">
  
    .<strong>open</strong>(ident, options, facility)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>:yields: syslog</p>

<p>Open the syslog facility. Raises a runtime exception if it is already open.</p>

<p>Can be called with or without a code block. If called with a block, the
Syslog object created is passed to the block.</p>

<p>If the syslog is already open, raises a RuntimeError.</p>

<p><code>ident</code> is a String which identifies the calling program.</p>

<p><code>options</code> is the logical OR of any of the following:</p>
<dl class="rdoc-list note-list"><dt>LOG_CONS
<dd>
<p>If there is an error while sending to the system logger, write directly to
the console instead.</p>
</dd><dt>LOG_NDELAY
<dd>
<p>Open the connection now, rather than waiting for the first message to be
written.</p>
</dd><dt>LOG_NOWAIT
<dd>
<p>Don&#39;t wait for any child processes created while logging messages. (Has
no effect on Linux.)</p>
</dd><dt>LOG_ODELAY
<dd>
<p>Opposite of LOG_NDELAY; wait until a message is sent before opening the
connection. (This is the default.)</p>
</dd><dt>LOG_PERROR
<dd>
<p>Print the message to stderr as well as sending it to syslog. (Not in
POSIX.1-2001.)</p>
</dd><dt>LOG_PID
<dd>
<p>Include the current process ID with each message.</p>
</dd></dl>

<p><code>facility</code> describes the type of program opening the syslog, and
is the logical OR of any of the following which are defined for the host
OS:</p>
<dl class="rdoc-list note-list"><dt>LOG_AUTH
<dd>
<p>Security or authorization. Deprecated, use LOG_AUTHPRIV instead.</p>
</dd><dt>LOG_AUTHPRIV
<dd>
<p>Security or authorization messages which should be kept private.</p>
</dd><dt>LOG_CONSOLE
<dd>
<p>System console message.</p>
</dd><dt>LOG_CRON
<dd>
<p>System task scheduler (cron or at).</p>
</dd><dt>LOG_DAEMON
<dd>
<p>A system daemon which has no facility value of its own.</p>
</dd><dt>LOG_FTP
<dd>
<p>An FTP server.</p>
</dd><dt>LOG_KERN
<dd>
<p>A kernel message (not sendable by user processes, so not of much use to
Ruby, but listed here for completeness).</p>
</dd><dt>LOG_LPR
<dd>
<p>Line printer subsystem.</p>
</dd><dt>LOG_MAIL
<dd>
<p>Mail delivery or transport subsystem.</p>
</dd><dt>LOG_NEWS
<dd>
<p>Usenet news system.</p>
</dd><dt>LOG_NTP
<dd>
<p>Network Time Protocol server.</p>
</dd><dt>LOG_SECURITY
<dd>
<p>General security message.</p>
</dd><dt>LOG_SYSLOG
<dd>
<p>Messages generated internally by syslog.</p>
</dd><dt>LOG_USER
<dd>
<p>Generic user-level message.</p>
</dd><dt>LOG_UUCP
<dd>
<p>UUCP subsystem.</p>
</dd><dt>LOG_LOCAL0 to LOG_LOCAL7
<dd>
<p>Locally-defined facilities.</p>
</dd></dl>

<p>Example:</p>

<pre class="code"><code class=""><span class='const'><span class='object_link'><a href="" title="Syslog (module)">Syslog</a></span></span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>webrick</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="" title="Syslog (module)">Syslog</a></span></span><span class='op'>::</span><span class='const'>LOG_PID</span><span class='comma'>,</span>
            <span class='const'><span class='object_link'><a href="" title="Syslog (module)">Syslog</a></span></span><span class='op'>::</span><span class='const'>LOG_DAEMON</span> <span class='op'>|</span> <span class='const'><span class='object_link'><a href="" title="Syslog (module)">Syslog</a></span></span><span class='op'>::</span><span class='const'>LOG_LOCAL3</span><span class='rparen'>)</span>
</code></pre>


  </div>
</div>
<div class="tags">
  
  


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/syslog/syslog.c', line 150</span>

static VALUE mSyslog_open(int argc, VALUE *argv, VALUE self)
{
    VALUE ident, opt, fac;
    const char *ident_ptr;

    if (syslog_opened) {
        rb_raise(rb_eRuntimeError, &quot;syslog already open&quot;);
    }

    rb_scan_args(argc, argv, &quot;03&quot;, &amp;ident, &amp;opt, &amp;fac);

    if (NIL_P(ident)) {
        ident = rb_gv_get(&quot;$0&quot;);
    }
    ident_ptr = StringValueCStr(ident);
    rb_check_safe_obj(ident);
    syslog_ident = strdup(ident_ptr);

    if (NIL_P(opt)) {
	syslog_options = LOG_PID | LOG_CONS;
    } else {
	syslog_options = NUM2INT(opt);
    }

    if (NIL_P(fac)) {
	syslog_facility = LOG_USER;
    } else {
	syslog_facility = NUM2INT(fac);
    }

    openlog(syslog_ident, syslog_options, syslog_facility);

    syslog_opened = 1;

    setlogmask(syslog_mask = setlogmask(0));

    /* be like File.new.open {...} */
    if (rb_block_given_p()) {
        rb_ensure(rb_yield, self, mSyslog_close, self);
    }

    return self;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="open!-class_method">
  
    .<strong>reopen</strong>(ident, options, facility)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>:yields: syslog</p>

<p>Closes and then reopens the syslog.</p>

<p>Arguments are the same as for open().</p>


  </div>
</div>
<div class="tags">
  
  


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


203
204
205
206
207
208</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/syslog/syslog.c', line 203</span>

static VALUE mSyslog_reopen(int argc, VALUE *argv, VALUE self)
{
    mSyslog_close(self);

    return mSyslog_open(argc, argv, self);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="opened?-class_method">
  
    .<strong>opened?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns true if the syslog is open.</p>


  </div>
</div>
<div class="tags">
  
  

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


215
216
217
218</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/syslog/syslog.c', line 215</span>

static VALUE mSyslog_isopen(VALUE self)
{
    return syslog_opened ? Qtrue : Qfalse;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="options-class_method">
  
    .<strong>options</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the options bitmask used in the last call to open()</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


229
230
231
232</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/syslog/syslog.c', line 229</span>

static VALUE mSyslog_options(VALUE self)
{
    return syslog_opened ? INT2NUM(syslog_options) : Qnil;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="reopen-class_method">
  
    .<strong>reopen</strong>(ident, options, facility)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>:yields: syslog</p>

<p>Closes and then reopens the syslog.</p>

<p>Arguments are the same as for open().</p>


  </div>
</div>
<div class="tags">
  
  


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


203
204
205
206
207
208</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/syslog/syslog.c', line 203</span>

static VALUE mSyslog_reopen(int argc, VALUE *argv, VALUE self)
{
    mSyslog_close(self);

    return mSyslog_open(argc, argv, self);
}</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Mon Feb 26 22:17:42 2018 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.12 (ruby-2.4.2).
</div>

    </div>
  </body>
</html>